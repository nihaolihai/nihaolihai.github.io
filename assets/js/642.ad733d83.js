(window.webpackJsonp=window.webpackJsonp||[]).push([[642],{1134:function(e,r,n){"use strict";n.r(r);var t=n(6),a=Object(t.a)({},(function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h2",{attrs:{id:"springbooteueka"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#springbooteueka"}},[e._v("#")]),e._v(" springbooteueka")]),e._v(" "),n("p",[e._v("一、创建买票工程做案例\n1）、创建三个项目consumer-user(消费者)、eureka-server(注册中心)、provider-ticket(生产者)")]),e._v(" "),n("p",[e._v("2）、目录结构如下：")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20201101120810373.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTExMTE4,size_16,color_FFFFFF,t_70#pic_center",alt:"在这里插入图片描述"}})]),e._v(" "),n("p",[e._v("二、配置案例需要的环境\n环境一：eureka-server(注册中心)相关")]),e._v(" "),n("p",[e._v("1）、所需jar")]),e._v(" "),n("dependency",[n("groupId",[e._v("org.springframework.cloud")]),e._v(" "),n("artifactId",[e._v("spring-cloud-starter-netflix-eureka-server")])],1),e._v(" "),n("p",[e._v("2）、全局环境配置\nserver:\nport: 8761\neureka:\ninstance:\nhostname: eureka-server #eureka实例的主机名\nclient:\nregister-with-eureka: false #不注册本身到Eureka注册中心\nfetch-registry: false #不从Eureka注册中心获取服务的注册信息\nservice-url:\ndefaultZone: http://localhost:8761/eureka/")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20201101120828512.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1OTExMTE4,size_16,color_FFFFFF,t_70#pic_center",alt:"在这里插入图片描述"}})]),e._v(" "),n("p",[e._v("环境二：provider-ticket(生产者)相关")]),e._v(" "),n("p",[e._v("1）、所需jar")]),e._v(" "),n("dependency",[n("groupId",[e._v("org.springframework.cloud")]),e._v(" "),n("artifactId",[e._v("spring-cloud-starter-netflix-eureka-client")])],1),e._v("\n2）、全局环境配置 \n#启动端口\nserver:\nport: 8001\n#项目名称\nspring:\napplication:\nname: provider-ticket\n#eureka配置\neureka:\ninstance:\nprefer-ip-address: true #使用服务的id地址注册\nclient:\nservice-url:\ndefaultZone: http://localhost:8761/eureka/\n"),n("p",[e._v("3）、启动项目，访问注册中心查看是否注册成功")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://img-blog.csdnimg.cn/20201101120838339.png#pic_center",alt:"在这里插入图片描述"}})]),e._v(" "),n("p",[e._v("环境三：consumer-user(消费者)相关\n1）、所需jar\n"),n("dependency",[n("groupId",[e._v("org.springframework.cloud")]),e._v(" "),n("artifactId",[e._v("spring-cloud-starter-netflix-eureka-client")])],1),e._v("\n2）、全局环境配置\nserver:\nport: 8002\nspring:\napplication:\nname: consumer-user\neureka:\ninstance:\nprefer-ip-address: true #使用服务的id地址注册\nclient:\nservice-url:\ndefaultZone: http://localhost:8761/eureka/")],1),e._v(" "),n("p",[e._v("三、案例相关代码\n1）、eureka-server(注册中心)开启Eureka服务")]),e._v(" "),n("p",[e._v("启动类：")]),e._v(" "),n("p",[e._v("@EnableEurekaServer//启用Eureka服务\n@SpringBootApplication\npublic class EurekaServerApplication {")]),e._v(" "),n("p",[e._v("public static void main(String[] args) {\nSpringApplication.run(EurekaServerApplication.class, args);\n}")]),e._v(" "),n("p",[e._v("}")]),e._v(" "),n("p",[e._v("2）、 provider-ticket(生产者)")]),e._v(" "),n("p",[e._v("service类：")]),e._v(" "),n("p",[e._v('@Service\npublic class TicketService {\npublic String getTicket(){\nreturn "《绿皮书》";\n}\n}\ncontroller类：\n@RestController\npublic class TicketController {\n@Autowired\nTicketService ticketService;\n@GetMapping("/ticket")\npublic String getTicket(){\nreturn ticketService.getTicket();\n}\n}')]),e._v(" "),n("p",[e._v("3）、 consumer-user(消费者)")]),e._v(" "),n("p",[e._v("注入远程访问模板类：")]),e._v(" "),n("p",[e._v("@Bean\n@LoadBalanced//启用负载均衡机制\npublic RestTemplate restTemplate(){\nreturn new RestTemplate();\n}")]),e._v(" "),n("p",[e._v('controller类：\n@RestController\npublic class UserController {\n@Autowired\nRestTemplate restTemplate;\n@GetMapping("/buy")\npublic String buyTicket(String name){\nString template = restTemplate.getForObject("http://PROVIDER-TICKET/ticket", String.class);\nreturn name+"购买了"+template;\n}\n}')])],1)}),[],!1,null,null,null);r.default=a.exports}}]);