(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{660:function(n,t,e){"use strict";e.r(t);var r=e(6),i=Object(r.a)({},(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("h2",{attrs:{id:"java-网页抓取"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#java-网页抓取"}},[n._v("#")]),n._v(" Java 网页抓取")]),n._v(" "),e("p",[n._v("import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.FileWriter;\nimport java.io.InputStreamReader;\nimport java.net.URL;")]),n._v(" "),e("p",[n._v('public class Main {\npublic static void main(String[] args)\nthrows Exception {\nURL url = new URL("http://www.runoob.com");\nBufferedReader reader = new BufferedReader\n(new InputStreamReader(url.openStream()));\nBufferedWriter writer = new BufferedWriter\n(new FileWriter("data.html"));\nString line;\nwhile ((line = reader.readLine()) != null) {\nSystem.out.println(line);\nwriter.write(line);\nwriter.newLine();\n}\nreader.close();\nwriter.close();\n}\n}')]),n._v(" "),e("ul",[e("li",[n._v("连接Socket\nimport java.net.InetAddress;\nimport java.net.Socket;")])]),n._v(" "),e("p",[n._v('public class WebPing {\npublic static void main(String[] args) {\ntry {\nInetAddress addr;\nSocket sock = new Socket("www.runoob.com", 80);\naddr = sock.getInetAddress();\nSystem.out.println("连接到 " + addr);\nsock.close();\n} catch (java.io.IOException e) {\nSystem.out.println("无法连接 " + args[0]);\nSystem.out.println(e);\n}\n}\n}')]),n._v(" "),e("ul",[e("li",[n._v("获取指定ip")])]),n._v(" "),e("p",[n._v("import java.net.InetAddress;\nimport java.net.UnknownHostException;")]),n._v(" "),e("p",[n._v('public class GetIP {\npublic static void main(String[] args) {\nInetAddress address = null;\ntry {\naddress = InetAddress.getByName("www.runoob.com");\n}\ncatch (UnknownHostException e) {\nSystem.exit(2);\n}\nSystem.out.println(address.getHostName() + "=" + address.getHostAddress());\nSystem.exit(0);\n}\n}')]),n._v(" "),e("ul",[e("li",[n._v("端口是否占用")])]),n._v(" "),e("p",[n._v('public class Main {\npublic static void main(String[] args) {\nSocket Skt;\nString host = "localhost";\nif (args.length > 0) {\nhost = args[0];\n}\nfor (int i = 0; i < 1024; i++) {\ntry {\nSystem.out.println("查看 "+ i);\nSkt = new Socket(host, i);\nSystem.out.println("端口 " + i + " 已被使用");\n}\ncatch (UnknownHostException e) {\nSystem.out.println("Exception occured"+ e);\nbreak;\n}\ncatch (IOException e) {\n}\n}\n}\n}')]),n._v(" "),e("ul",[e("li",[n._v("获取本机ip地址及主机名")])]),n._v(" "),e("p",[n._v('public class Main {\npublic static void main(String[] args)\nthrows Exception {\nInetAddress addr = InetAddress.getLocalHost();\nSystem.out.println("Local HostAddress:\n"+addr.getHostAddress());\nString hostname = addr.getHostName();\nSystem.out.println("Local host name: "+hostname);\n}\n}')]),n._v(" "),e("ul",[e("li",[n._v("远程文件大小")])]),n._v(" "),e("p",[n._v('public class Main {\npublic static void main(String[] args) throws Exception {\nint size;\nURL url = new URL("http://www.runoob.com/wp-content/themes/runoob/assets/img/newlogo.png");\nURLConnection conn = url.openConnection();\nsize = conn.getContentLength();\nif (size < 0)\nSystem.out.println("无法获取文件大小。");\nelse\nSystem.out.println("文件大小为：" + size + " bytes");\nconn.getInputStream().close();\n}\n}')]),n._v(" "),e("ul",[e("li",[n._v("Socket 实现多线程服务器程序")])]),n._v(" "),e("p",[n._v("import java.io.IOException;\nimport java.io.PrintStream;\nimport java.net.ServerSocket;\nimport java.net.Socket;")]),n._v(" "),e("p",[n._v("public class MultiThreadServer implements Runnable {\nSocket csocket;\nMultiThreadServer(Socket csocket) {\nthis.csocket = csocket;\n}")]),n._v(" "),e("p",[n._v('public static void main(String args[])\nthrows Exception {\nServerSocket ssock = new ServerSocket(1234);\nSystem.out.println("Listening");\nwhile (true) {\nSocket sock = ssock.accept();\nSystem.out.println("Connected");\nnew Thread(new MultiThreadServer(sock)).start();\n}\n}\npublic void run() {\ntry {\nPrintStream pstream = new PrintStream\n(csocket.getOutputStream());\nfor (int i = 100; i >= 0; i--) {\npstream.println(i +\n" bottles of beer on the wall");\n}\npstream.close();\ncsocket.close();\n}\ncatch (IOException e) {\nSystem.out.println(e);\n}\n}\n}')]),n._v(" "),e("ul",[e("li",[n._v("查看主机指定文件的最后修改时间")])]),n._v(" "),e("p",[n._v("import java.net.URL;\nimport java.net.URLConnection;\nimport java.util.Date;\nimport java.text.SimpleDateFormat;")]),n._v(" "),e("p",[n._v('public class Main {\npublic static void main(String[] argv) throws Exception {\nURL u = new URL("http://127.0.0.1/test/test.html");\nURLConnection uc = u.openConnection();\nSimpleDateFormat ft = new SimpleDateFormat ("yyyy-MM-dd hh:mm:ss");\nuc.setUseCaches(false);\nlong timestamp = uc.getLastModified();\nSystem.out.println("test.html 文件最后修改时间 :" + ft.format(new Date(timestamp)));\n}\n}')]),n._v(" "),e("ul",[e("li",[n._v("获取 URL响应头的日期信息")])]),n._v(" "),e("p",[n._v('public class Main{\npublic static void main(String args[])\nthrows Exception {\nURL url = new URL("http://www.runoob.com");\nHttpURLConnection httpCon =\n(HttpURLConnection) url.openConnection();\nlong date = httpCon.getDate();\nif (date == 0)\nSystem.out.println("无法获取信息。");\nelse\nSystem.out.println("Date: " + new Date(date));\n}\n}')]),n._v(" "),e("ul",[e("li",[n._v("获取 URL 响应头信息")])]),n._v(" "),e("p",[n._v("import java.io.IOException;\nimport java.net.URL;\nimport java.net.URLConnection;\nimport java.util.Map;\nimport java.util.Set;")]),n._v(" "),e("p",[n._v('public class Main {\npublic static void main(String[] args) throws IOException{\nURL url = new URL("http://www.runoob.com");\nURLConnection conn = url.openConnection();')]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[n._v('    Map headers = conn.getHeaderFields();\n    Set<String> keys = headers.keySet();\n    for( String key : keys ){\n        String val = conn.getHeaderField(key);\n        System.out.println(key+"    "+val);\n    }\n    System.out.println( conn.getLastModified() );\n}\n')])])]),e("p",[n._v("}")]),n._v(" "),e("ul",[e("li",[n._v("解析 URL")])]),n._v(" "),e("p",[n._v("import java.net.URL;")]),n._v(" "),e("p",[n._v('public class Main {\npublic static void main(String[] args)\nthrows Exception {\nURL url = new URL("http://www.runoob.com/html/html-tutorial.html");\nSystem.out.println("URL 是 " + url.toString());\nSystem.out.println("协议是 " + url.getProtocol());\nSystem.out.println("文件名是 " + url.getFile());\nSystem.out.println("主机是 " + url.getHost());\nSystem.out.println("路径是 " + url.getPath());\nSystem.out.println("端口号是 " + url.getPort());\nSystem.out.println("默认端口号是 "\n+ url.getDefaultPort());\n}\n}')]),n._v(" "),e("ul",[e("li",[n._v("ServerSocket 和 Socket 通信实例")])]),n._v(" "),e("p",[n._v("import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.OutputStreamWriter;\nimport java.net.ServerSocket;\nimport java.net.Socket;")]),n._v(" "),e("p",[n._v('public class Server {\npublic static void main(String[] args) {\ntry {\nServerSocket ss = new ServerSocket(8888);\nSystem.out.println("启动服务器....");\nSocket s = ss.accept();\nSystem.out.println("客户端:"+s.getInetAddress().getLocalHost()+"已连接到服务器");')]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[n._v('     BufferedReader br = new BufferedReader(new InputStreamReader(s.getInputStream()));\n     //读取客户端发送来的消息\n     String mess = br.readLine();\n     System.out.println("客户端："+mess);\n     BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));\n     bw.write(mess+"\\n");\n     bw.flush();\n  } catch (IOException e) {\n     e.printStackTrace();\n  }\n')])])]),e("p",[n._v("}\n}")])])}),[],!1,null,null,null);t.default=i.exports}}]);