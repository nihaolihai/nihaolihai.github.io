(window.webpackJsonp=window.webpackJsonp||[]).push([[478],{990:function(t,n,e){"use strict";e.r(n);var a=e(6),r=Object(a.a)({},(function(){var t=this.$createElement,n=this._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}},[n("h2",{attrs:{id:"jquery"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jquery"}},[this._v("#")]),this._v(" jquery")]),this._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[this._v('\nfrom表单下面给一个input输入框，给一个ID和onInput事件；\n <from action="" method="post" name="Form" id="Form">\n    <input type="text" id="yunman" oninput="tableFilter()" name="keywords" placeholder="输入关键字"/>\n    <table>\n        <thead>    \n            <tr>\n                <th>编号</th>\n                <th>姓名</th>   \n            </tr>\n        </thead>\n        <tbody id="trs">\n        <c:choose>\n        <c:when test="${not empty varList}">\n        <c:if test="${QX.cha == 1 }">\n        <c:forEach items="${varList}" var="var">\n            <tr>\n                <td title="${var.id}" id="${var.id}">${var.id}</td>\n                <td title="${var.name}" id="${var.name}">${var.name}</td>\n            </tr>\n        </c:forEach>\n        </c:if>\n        <c:if test="${QX.cha == 0 }">\n            <tr>\n                <td colspan="2" class="center">您无权查看</td>\n            </tr>\n        </c:if>\n        </c:when>\n        <c:otherwise>\n            <tr class="main_info">\n                <td colspan="2" class="center">没有相关数据</td>\n            </tr>\n        </c:otherwise>\n        </c:choose>\n        </tbody>\n        <tfoot>\n            <span>这是table的页脚</span>\n        </tfoot>\n    </table>\n</from>\n当用户在输入框输入条件语句查询时，oninput事件触发；\n<script type="text/javascript">\n    //自动检索\n\tfunction tableFilter() {\n        var keyword = document.getElementById("yunman").value.toLowerCase().split(" ");\n        var table = document.getElementById("trs");\n        var ele;\n        for (var r = 0; r < table.rows.length; r++) {\n             ele = table.rows[r].innerHTML;\n             var displayStyle = \'none\';\n             for (var i = 0; i < keyword.length; i++) {\n                 if (keyword == "") { displayStyle = ""; break; }\n                 if (ele.toLowerCase().indexOf(keyword[i]) > 0) {\n                     displayStyle = \'\';\n                 }else {\n                     displayStyle = \'none\';\n                     break;\n                 }\n             }\n             table.rows[r].style.display = displayStyle;\n         }\n    }\n<\/script>\n根据前端页面style.display = displayStyle;一个样式的属性，可以把值隐藏起来，这样就实现了我们所说的，自动检索。\n\n//只能是数字和.\nfunction keyup(ob) {\n\t if (!ob.value.match(/^[\\+\\-]?\\d*?\\.?\\d*?$/)) ob.value = ob.t_value; else ob.t_value = ob.value; if (ob.value.match(/^(?:[\\+\\-]?\\d+(?:\\.\\d+)?)?$/)) ob.o_value = ob.value;\n}\nfunction keyPress(ob) {\n     if (!ob.value.match(/^[\\+\\-]?\\d*?\\.?\\d*?$/)) ob.value = ob.t_value; else ob.t_value = ob.value; if (ob.value.match(/^(?:[\\+\\-]?\\d+(?:\\.\\d+)?)?$/)) ob.o_value = ob.value;\n}\nfunction blur(ob) {\n\tif(!ob.value.match(/^(?:[\\+\\-]?\\d+(?:\\.\\d+)?|\\.\\d*?)?$/))ob.value=ob.o_value;else{if(ob.value.match(/^\\.\\d+$/))ob.value=0+ob.value;if(ob.value.match(/^\\.$/))ob.value=0;ob.o_value=ob.value};\n}\n//只能是数字\nfunction keyupnum(ob) {\n\tif(ob.value.length==1){ob.value=ob.value.replace(/[^0-9]/g,\'\')}else{ob.value=ob.value.replace(/\\D/g,\'\')}\n}\n//只能是正数字\nfunction keyupnumint(ob) {\n\tif(ob.value.length==1){ob.value=ob.value.replace(/[^1-9]/g,\'\')}else{ob.value=ob.value.replace(/\\D/g,\'\')}\n}\n\n//验证邮箱\nfunction ismail(mail){\n\treturn(new RegExp(/^(?:[a-zA-Z0-9]+[_\\-\\+\\.]?)*[a-zA-Z0-9]+@(?:([a-z0-9]+[_\\-]?)*[a-z0-9]+\\.)+([a-z]{2,})+$/).test(mail));\n}\n//手机号\nfunction ismobile(mobile){\n\treturn(new RegExp(/^(((13[0-9]{1})|159)+\\d{8})$/).test(mobile));\n}\n\n//相除  保留小数位1位\nfunction divide_point(a,b){\n\tvar total = a/b;\n\treturn total.toFixed(1);\n}\n//根据秒获取时分秒\nfunction formatSeconds(value) {\n    var secondTime = parseInt(value);// 秒\n    var minuteTime = 0;// 分\n    var hourTime = 0;// 小时\n    if(secondTime > 60) {//如果秒数大于60，将秒数转换成整数\n        //获取分钟，除以60取整数，得到整数分钟\n        minuteTime = parseInt(secondTime / 60);\n        //获取秒数，秒数取佘，得到整数秒数\n        secondTime = parseInt(secondTime % 60);\n        //如果分钟大于60，将分钟转换成小时\n        if(minuteTime > 60) {\n            //获取小时，获取分钟除以60，得到整数小时\n            hourTime = parseInt(minuteTime / 60);\n            //获取小时后取佘的分，获取分钟除以60取佘的分\n            minuteTime = parseInt(minuteTime % 60);\n        }\n    }\n    var result =parseInt(hourTime) + ":" + parseInt(minuteTime) + ":" + parseInt(secondTime)\n    return result;\n}\n//根据秒获取时\nfunction formatHour(value) {\n\tvar secondTime = parseInt(value);// 秒\n\tvar minuteTime = 0;// 分\n\tvar hourTime = 0;// 小时\n\tif(secondTime > 60) {//如果秒数大于60，将秒数转换成整数\n\t\t//获取分钟，除以60取整数，得到整数分钟\n\t\tminuteTime = parseInt(secondTime / 60);\n\t\t//获取秒数，秒数取佘，得到整数秒数\n\t\tsecondTime = parseInt(secondTime % 60);\n\t\t//如果分钟大于60，将分钟转换成小时\n\t\tif(minuteTime > 60) {\n\t\t\t//获取小时，获取分钟除以60，得到整数小时\n\t\t\thourTime = parseInt(minuteTime / 60);\n\t\t\t//获取小时后取佘的分，获取分钟除以60取佘的分\n\t\t\tminuteTime = parseInt(minuteTime % 60);\n\t\t}\n\t}\n\tvar result =parseInt(hourTime);\n\treturn result;\n}\n//根据秒获取分\nfunction formatMinute(value) {\n\tvar secondTime = parseInt(value);// 秒\n\tvar minuteTime = 0;// 分\n\tvar hourTime = 0;// 小时\n\tif(secondTime > 60) {//如果秒数大于60，将秒数转换成整数\n\t\t//获取分钟，除以60取整数，得到整数分钟\n\t\tminuteTime = parseInt(secondTime / 60);\n\t\t//获取秒数，秒数取佘，得到整数秒数\n\t\tsecondTime = parseInt(secondTime % 60);\n\t\t//如果分钟大于60，将分钟转换成小时\n\t\tif(minuteTime > 60) {\n\t\t\t//获取小时，获取分钟除以60，得到整数小时\n\t\t\thourTime = parseInt(minuteTime / 60);\n\t\t\t//获取小时后取佘的分，获取分钟除以60取佘的分\n\t\t\tminuteTime = parseInt(minuteTime % 60);\n\t\t}\n\t}\n\tvar result =parseInt(minuteTime);\n\treturn result;\n}\n//根据秒获取秒\nfunction formatSecond(value) {\n\tvar secondTime = parseInt(value);// 秒\n\tvar minuteTime = 0;// 分\n\tvar hourTime = 0;// 小时\n\tif(secondTime > 60) {//如果秒数大于60，将秒数转换成整数\n\t\t//获取分钟，除以60取整数，得到整数分钟\n\t\tminuteTime = parseInt(secondTime / 60);\n\t\t//获取秒数，秒数取佘，得到整数秒数\n\t\tsecondTime = parseInt(secondTime % 60);\n\t\t//如果分钟大于60，将分钟转换成小时\n\t\tif(minuteTime > 60) {\n\t\t\t//获取小时，获取分钟除以60，得到整数小时\n\t\t\thourTime = parseInt(minuteTime / 60);\n\t\t\t//获取小时后取佘的分，获取分钟除以60取佘的分\n\t\t\tminuteTime = parseInt(minuteTime % 60);\n\t\t}\n\t}\n\tvar result =parseInt(secondTime);\n\treturn result;\n}\n//检索\nfunction tableFilter() {\n            var keyword = document.getElementById("yunman").value.toLowerCase().split(" ");\n            var table = document.getElementById("trs");\n            var ele;\n            for (var r = 0; r < table.rows.length; r++) {\n                ele = table.rows[r].innerHTML;\n                var displayStyle = \'none\';\n                for (var i = 0; i < keyword.length; i++) {\n                    if (keyword == "") { displayStyle = ""; break; }\n                    if (ele.toLowerCase().indexOf(keyword[i]) > 0) {\n                        displayStyle = \'\';\n                    }\n                    else {\n                        displayStyle = \'none\';\n                        break;\n                    }\n                }\n                table.rows[r].style.display = displayStyle;\n            }\n        }\n//点击事件\nfunction gethzjf(){\n\t\t\tvar zfdstr = \'\';\n\t\t\tfor(var i=0;i < document.getElementsByName(\'ids\').length;i++){\n\t\t\t\t  if(document.getElementsByName(\'ids\')[i].checked){\n\t\t\t\t  \tif(zfdstr==\'\') zfdstr += document.getElementsByName(\'ids\')[i].value;\n\t\t\t\t  \telse zfdstr += \',\' + document.getElementsByName(\'ids\')[i].value;\n\t\t\t\t  }\n\t\t\t}\n\t\t\tvar sum=0;\n\t\t\tvar zfdarr = zfdstr.split(",");\n\t\t\tfor(var i=0;i<zfdarr.length;i++){\n\t\t\t\tif(zfdarr[i]==\'\'){\n\t\t\t\t\tbreak;\n\t\t\t\t}else{\n\t\t\t\t\tsum += parseFloat($("#shje_"+zfdarr[i]).val());\n\t\t\t\t}\n\t\t\t}\n\t\t\t$("#getshjetotal").text(sum);\n\t\t}\n\t\t\nfunction getshtotal(id){\n\t\t\tif($("#shje_"+id).val()==\'\'){\n\t\t\t\t$("#shje_"+id).val(\'0\');\n\t\t\t}\n\t\t\tvar value = document.getElementsByName(\'shje_amt\');\n\t\t\tvar sum=0;\n\t\t\tfor(var i=0;i<value.length;i++){\n\t\t\t\tsum += parseFloat(value[i].value);\n\t\t\t}\n\t\t\t$("#getshjetotal").text(sum);\n\t\t}\n//获取数字和.\nfunction getval(obj){\n\t\t\tvar reg=/^[0-9]+(.[0-9]{1,8})?$/;\n\t\t\tif(!reg.test(obj.value)){\n\t\t\t\tvar amt = $("#ZFJE_AMT").val();\n\t\t\t\t$("#JYFE_AMT").val(amt.replace(/[^\\d.]/g,\'\'));\n\t\t\t}else{\n\t\t\t\t$("#JYFE_AMT").val(obj.value);\n\t\t\t}\n\t\t}\n//新增动态插入tr\nfunction add(company_id){\n        \tvar adom = $(\'#domid\');\n\t\t\tvar title = adom.attr(\'title\');\n\t\t\tif(title=="保存"){\n\t\t\t\t$("#domid").tips({\n\t\t\t\t\tside:3,\n\t\t            msg:\'只能单个保存\',\n\t\t            bg:\'#AE81FF\',\n\t\t            time:2\n\t\t        });\n\t\t\t\t$("#domid").focus();\n\t\t\t}else{\n\t        \tvar th = document.getElementById("yf_init");\n\t            var trObj = document.createElement("tr");  \n\t            trObj.id = new Date().getTime(); \n\t            var td1 = "<td style=\'width:36px;\'></td>";\n\t            var td2 = "<td style=\'width:155px;\' class=\'th\'><select name=\'ACCOUNT_YEAR\' id=\'ACCOUNT_YEAR\'><option value=\'\' selected=\'selected\'>请选择年度</option></select></td>";\n\t            var td3 = "<td style=\'width:160px;\' class=\'th\'><select style=\'width:60px;\' name=\'IS_CURRENT\' id=\'IS_CURRENT\'><option value=\'0\' selected>N</option><option value=\'1\'>Y</option></select></td>";\n\t            var td4 = "<td class=\'th\' colspan=\'10\'></td>";\n\t            trObj.innerHTML = td1+td2+td3+td4;\n\t            th.before(trObj); \n\t            getYear();\n\t            $("#addtr").after("<a style=\'height: 20px;\' id=\'domid\' class=\'btn btn-mini btn-success buttons_"+trObj.id+"\' title=\'保存\' onclick=\'addTD("+company_id+")\'>保存</a><a style=\'height: 20px;\' class=\'btn btn-mini btn-danger buttons_"+trObj.id+"\' onclick=\'deltd("+trObj.id+")\'>取消</a>");\n\t\t\t}\n        }  \n//动态插入select option\nfunction getYear(){\n\t\t\tvar myDate = new Date();\n\t\t\tvar year = myDate.getFullYear();\n\t\t\tvar account_year = document.getElementById("ACCOUNT_YEAR");\n\t\t\tfor(var i=2010;i<=year+10;i++){\n\t\t\t\taccount_year.options.add(new Option(i,i)); \n\t\t\t}\n\t\t\t$("#ACCOUNT_YEAR").val(year);\n\t\t}\n\t\t\n\t\t\n//删除tr \nfunction deltd(obj) { \n\t//var trId = obj.parentNode.parentNode.id;  \n        //var trObj = document.getElementById(trId);\n        var trObj = document.getElementById(obj);\n        document.getElementById("yf_inits").removeChild(trObj);\n        $(".buttons_"+obj).remove();\n} \n        \n//保存\nfunction addTD(company_id){\n//1种方式\n\t\t$.ajax({\n\t\t    \t type: "POST",\n\t\t    \t url:\'<%=basePath%>sal_job/getJobByContractId.do\',\n\t\t         data:{},\n\t\t         dataType:\'json\',\n\t\t         cache: false,\n\t\t         success : function(data) {\n\t\t        \t $(".getcontrac_idadd").attr("onclick","addJob(\'"+data.pd.company_id+"\',\'0\'");\n\t\t        \t\n\t\t        \t $("#trjobs tr").remove();\n\t\t        \t if(data.list.length==0){\n\t\t        \t\t $("#trjobs").append(\'<tr class="main_info" id="tbp"><td colspan="100" class="center" >没有相关数据</td></tr>\');\n\t\t        \t }else{\n\t\t\t        \t $.each(data.list, function(index, list){\n\t\t\t        \t\t index+=1;\n\t\t\t\t\t$("#trjobs").append(\'<tr>\'+\n\t\t\t\t\t\t\t\t\t\'<td class="center" style="width:60px;">\'\n\t\t\t\t\t\t\t\t\t+\'<label class="pos-rel"><input type="checkbox" name="idjobs" value="\'+list.rec_id+\'" class="ace" /><span class="lbl"></span></label></td>\'\n\t\t\t\t\t\t\t\t\t+\'</td>\'\n\t\t\t\t\t\t\t\t\t+\'</tr>\');\n\t\t\t\t\t\t }); \n\t\t        \t }\n        \tif($("#ACCOUNT_YEAR option:selected").val()==""){\n\t\t\t\t$("#ACCOUNT_YEAR").tips({\n\t\t\t\t\tside:3,\n\t\t            msg:\'请输入记账年度\',\n\t\t            bg:\'#AE81FF\',\n\t\t            time:2\n\t\t        });\n\t\t\t\t$("#ACCOUNT_YEAR").focus();\n\t\t\treturn false;\n\t\t\t}else{\n\t        \ttop.jzts();\n\t\t\t\tvar url = "<%=basePath%>cst_yf_init/saveYF.do?COMPANY_ID="+company_id+\'&ACCOUNT_YEAR=\'+$("#ACCOUNT_YEAR option:selected").val()+\'&IS_CURRENT=\'+$("#IS_CURRENT option:selected").val();\n//2种方式\n\t\t\t\t$.get(url,function(data){\n\t\t\t\t\tif("success" == data.result){\n\t\t\t\t\t\t document.location.reload();\n\t\t\t\t\t}else if("false" == data.result){\n\t\t\t\t\t\ttop.hangge();\n\t\t\t\t\t\tbootbox.dialog({\n\t\t\t\t\t\t\tmessage: \'记账年度[\'+data.pd.ACCOUNT_YEAR+\']已存在\',\n\t\t\t\t\t\t\tbuttons: \t\t\t\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t"button" :\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t"label" : "确定",\n\t\t\t\t\t\t\t\t\t"className" : "btn-sm btn-success"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t$("#ACCOUNT_YEAR").focus();\n\t\t\t\t\t}\n\t\t\t\t});\n        \t}\n        }\n//ajax处理日期\nvar job_date = formatDate(new Date(data.pd_part.JOB_PART_DATE));\n\t\t\t\t\t\tif(job_date<\'2000\' || job_date==\'NaN-aN-aN\'){\n\t\t\t\t\t\t\tjob_date=\'\';\n\t\t\t\t\t\t}\n$("#PURSTK_FLAG option[value=\'"+data.pd_process.PURSTK_FLAG+"\']").attr("selected",true);\n//日期比较\t\t\nvar date5 = new Date($("#GX_SCH_SDATE").val().replace(/\\-/g, "\\/"));//中日程开始日\n var date6 = new Date($("#GX_SCH_EDATE").val().replace(/\\-/g, "\\/"));//中日程结束日\n\t\t\t    if(date6.getTime() < date5.getTime()){\n\t\t\t\t\t$("#GX_SCH_EDATE").tips({\n\t\t\t\t\t\tside:3,\n\t\t\t            msg:\'中日程完成日不能小于中日程开始日\',\n\t\t\t            bg:\'#AE81FF\',\n\t\t\t            time:2\n\t\t\t        });\n\t\t\t\t\t$("#GX_SCH_EDATE").focus();\n\t\t\t\treturn false;\n\t\t\t\t}\n\n//日期转换\nfunction formatDate(now) { \n\t\t     var year=now.getYear(); \n\t\t     var year = year < 2000 ? year + 1900 : year\n\t\t     var yy = year.toString().substr(2, 2);\n\t\t     var month=now.getMonth()+1;\n\t\t     var monthval=("0" + month).slice(-2);\n\t\t     var date=now.getDate(); \n\t\t     var dateval=("0" + date).slice(-2);\n\t\t     return yy+"/"+monthval+"/"+dateval; \n\t\t} \n//格式化金额 数字，小数位，货币符号，千位符号，小数符号\nfunction formatMoney(number, places, symbol, thousand, decimal) {\n            number = number || 0;\n            places = !isNaN(places = Math.abs(places)) ? places : 2;\n            symbol = symbol !== undefined ? symbol : "$";\n            thousand = thousand || ",";\n            decimal = decimal || ".";\n            var negative = number < 0 ? "-" : "",\n                i = parseInt(number = Math.abs(+number || 0).toFixed(places), 10) + "",\n                j = (j = i.length) > 3 ? j % 3 : 0;\n            return symbol + negative + (j ? i.substr(0, j) + thousand : "") + i.substr(j).replace(/(\\d{3})(?=\\d)/g, "$1" + thousand) + (places ? decimal + Math.abs(number - i).toFixed(places).slice(2) : "");\n        }\n\n//熙增零件节点\nfunction addPartNode(id,name){\n\tvar newNode = { id:"test_part",name:name};\n\tvar nownode = zTree.getNodesByParam("id", id, null);  \n\tzTree.addNodes(null, newNode);\n}\n//释放零件节点\nfunction delPartNode(){\n\t\t\tvar nownode = zTree.getNodesByParam("id", "test_part", null);  \n\t\t\tzTree.removeNode(nownode[0]);\n} \n//更新零件节点\nfunction editPartNode(ID,code,name,guage,qty){\n\t\t\tvar nownode = zTree.getNodesByParam("pId", ID, null); \n\t\t\tnownode[0].name=code+\' \'+name+\' \'+guage+\' \'+qty;\n\t\t\tzTree.updateNode(nownode[0]);\n} \n//删除零件节点\nfunction delPartNodeById(ID){\n\t\t\tvar nownode = zTree.getNodesByParam("pId", ID, null);  \n\t\t\tzTree.removeNode(nownode[0]);\n} \n//新增工序节点\nfunction addProcessNode(part_id,name,GX_NUMBER){\n\t\t\tvar newNode = {id:"test_process"+GX_NUMBER,name:name};\n\t\t\tvar nownode = zTree.getNodesByParam("pId", part_id, null);  \n\t\t\tzTree.addNodes(nownode[0], newNode);\n}\n//新增工序节点并变更\nfunction addProcessNodeUpdatename(part_id,GX_NUMBER,P_CODE,P_NAME,SCH_ST,ACT_ST){\n\t\t\tvar nownode = zTree.getNodesByParam("id", "test_process"+GX_NUMBER, null); \n\t\t\tnownode[0].name=GX_NUMBER+\')\'+P_CODE+\' \'+P_NAME+\' \'+SCH_ST+\'H  \'+\'(\'+ACT_ST+\')\';\n\t\t\tzTree.updateNode(nownode[0]);\n\t\t}\n//释放工序节点\nfunction delProcessNode(number){\n\t\t\tvar nownode = zTree.getNodesByParam("id", "test_process"+number, null);  \n\t\t\tzTree.removeNode(nownode[0]);\n\t\t} \n//更新工序节点\nfunction editProcessNode(ID,GX_NUMBER,P_CODE,P_NAME,SCH_ST,ACT_ST){\n\t\t\tvar nownode = zTree.getNodesByParam("process_id", ID, null); \n\t\t\tnownode[0].name=GX_NUMBER+\')\'+P_CODE+\' \'+P_NAME+\' \'+SCH_ST+\'H  \'+\'(\'+ACT_ST+\')\';\n\t\t\tzTree.updateNode(nownode[0]);\n\t\t}\n//设置工序节点属性\nfunction editProcessNodeSetting(part_id,ID,number){\n\t\t\tvar processnode = zTree.getNodesByParam("id", "test_process"+number, null);  \n\t\t\tvar partnode = zTree.getNodesByParam("pId", part_id, null);  \n\t\t\tprocessnode[0].pId=part_id;\n\t\t\tprocessnode[0].url=\'job_part/listProcess.do?job_part_id=\'+part_id+\'&company_id=${pd_sal.COMPANY_ID}&sal_id=${pd.sal_id}&itemkind_id=${pd_sal.ITEMKIND_REC_ID}&part_process_id=\'+ID;\n\t\t\tprocessnode[0].process_id=ID;\n\t\t\tprocessnode[0].sum_pid=processnode[0].sum_pid+\',\'+ID;\n\t\t\tpartnode[0].sum_pid=partnode[0].sum_pid+\',\'+ID;\n\t\t\tprocessnode[0].target=\'treeFrame\';\n\t\t\tzTree.updateNode(processnode[0]);\n\t\t\tzTree.updateNode(partnode[0]);\n\t\t}\n//展开树形\nfunction getExtendode(){\n\tvar treeNodes = eval(data.list);\n\t  zTree = $("#leftTree").zTree(setting, treeNodes);\n\t  var newnode = zTree.getNodesByParam("pId", part_id, null); \n\t  zTree.expandNode(newnode[0]);\n}\n//图片预览\n<link id="artDialogSkin" href="static/js/artDialog/newartdialog/css/aero.css" rel="stylesheet" type="text/css" />\n<script type="text/javascript" src="static/js/artDialog/newartdialog/js/artDialog.js"><\/script> \n\n<a style="cursor: pointer;text-decoration: none;" title="${var.PART_NAME}图片" class="bwGal">\n\t\t\t\t\t\t\t\t\t\t<img alt="${var.PART_NAME}" src="<%=basePath%>uploadFiles/uploadImgs/${var.JPG_FILE}" width="88" height="32">\n\t\t\t\t\t\t\t\t\t\t</a>\n<form action="job_part/doUploadPicture.do" name="Form" id="Form" method="post" enctype="multipart/form-data">\n\n//图片预览\n$("a[class*=\'bwGal\']").on("click",function(){\n\t\t\t\tvar fileurl = $(this).siblings("input:hidden").val();\n\t\t\t\tartDialog({title:\'预览\', content:\'<img width="817" height="479" src="\'+fileurl+\'" />\'});\n});\n\n</form>\n//后台\n@RequestMapping(value="/saveZFDHX")\n\tpublic ModelAndView saveZFDHX(@RequestParam(value="file",required=false) MultipartFile yfd_file,Cst_zfd cst_zfd){\n\n}\n<input onchange="uploadIMG(this)" type="file" name="file" id="tp" accept=".bmp,.jpg,.gif,.png,.jpeg" data-rule="required" onchange="fileType(this)">\n\t\t\t\t\t\t\t\t\t\t\t<img alt="显示图片" src="" id="icon" width="100px" height="100px">\nfunction uploadIMG(obj){\n\t\t\tvar file = obj.files[0];\n\t\t\tvar reader = new FileReader();\n\t\t\treader.onloadstart = function(e){\n\t\t\t\tconsole.log("开始读取...");\n\t\t\t}\n\t\t\treader.onprogress = function(e){\n\t\t\t\tconsole.log("正在读取...");\n\t\t\t}\n\t\t\treader.onabort = function(e){\n\t\t\t\tconsole.log("中断读取...");\n\t\t\t}\n\t\t\treader.onerror = function(e){\n\t\t\t\tconsole.log("读取异常...");\n\t\t\t}\n\t\t\treader.onload = function(e){\n\t\t\t\tconsole.log("成功读取...");\n\t\t\t\tvar img = document.getElementById("icon");\n\t\t\t\timg.src = e.target.result;\n\t\t\t}\n\t\t\treader.readAsDataURL(file)\n\t\t}\t\t\t\t\t\t\t\t\t\t\n\n<script type="text/javascript" src="static/js/layer/layer.js"><\/script>\n\n//父类弹出框\nfunction inSuplier(company_id){\n\t\t\tlayer.open({\n\t            type: 2,\n\t            title: \'选\',\n\t            shadeClose: true,\n\t            shade: 0.5,\n\t            area: [\'600px\', \'360px\'],\n\t            content: \'<%=basePath%>test/listtest.do?company_id=\'+company_id\n\t        });\n\t\t}\n\t\t//接受参数\n\t\tfunction setSuplierValue(id){\n\t        $("#ID").val(id);\n\t        \n\t\t}\n//子类点击事件\nfunction ins(obj,tax){\n\t\t\tvar index = obj;\n\t\t\tvar name = $("#name_"+index)[0].innerHTML;\n\t\t\tvar code = $("#code_"+index)[0].innerHTML;\n\t\t\tparent.setValueSuplier(index,code,name,tax);\n\t\t\tparent.layer.closeAll();\n\t\t}\n\n/**\n      * 获取当月的 天数\n      */\n     public static int getCurrentMonthDay(){\n    \t Calendar a = Calendar.getInstance();\n    \t a.set(Calendar.DATE, 1);\n    \t a.roll(Calendar.DATE, -1);\n    \t int maxDate = a.get(Calendar.DATE);\n    \t return maxDate;\n    }\n    \n    /**\n      * 根据 年、月 获取对应的月份 的 天数\n      */\n    public static int getDaysByYearMonth(int year, int month){\n    \tCalendar a = Calendar.getInstance();\n    \ta.set(Calendar.YEAR, year);\n    \ta.set(Calendar.MONTH, month - 1);\n    \ta.set(Calendar.DATE, 1);\n    \ta.roll(Calendar.DATE, -1);\n    \tint maxDate = a.get(Calendar.DATE);\n    \treturn maxDate;\n     }\n\n//遍历指定路径下的各个txt文本\n\tpublic static List<String> getFileList(File file) {  \n        List<String> result = new ArrayList<String>();  \n        if (!file.isDirectory()) {  \n            System.out.println(file.getAbsolutePath());  \n            result.add(file.getAbsolutePath());  \n        } else {  \n            File[] directoryList = file.listFiles(new FileFilter() {  \n                public boolean accept(File file) {  \n                    if (file.isFile() && file.getName().indexOf("txt") > -1) {  \n                        return true;  \n                    } else {  \n                        return false;  \n                    }  \n                }  \n            });  \n            for (int i = 0; i < directoryList.length; i++) {  \n                result.add(directoryList[i].getPath());  \n            }  \n        }  \n        return result;  \n    }\n\t\n\t//转换成拼音\n\tpublic static String getPinYin(String src) {\n\t\tchar[] t1 = null;\n\t\tt1 = src.toCharArray();\n\t\tString[] t2 = new String[t1.length];\n\t\tHanyuPinyinOutputFormat t3 = new HanyuPinyinOutputFormat();\n\t\tt3.setCaseType(HanyuPinyinCaseType.LOWERCASE);\n\t\tt3.setToneType(HanyuPinyinToneType.WITHOUT_TONE);\n\t\tt3.setVCharType(HanyuPinyinVCharType.WITH_V);\n\t\tString t4 = "";\n\t\tint t0 = t1.length;\n\t\ttry {\n\t\t\tfor (int i = 0; i < t0; i++) {\n\t\t\t\t// System.out.println(t1[i]);\n\t\t\t\tif (Character.toString(t1[i]).matches("[\\\\u4E00-\\\\u9FA5]+")) {\n\t\t\t\t\tt2 = PinyinHelper.toHanyuPinyinStringArray(t1[i], t3);\n\t\t\t\t\tt4 += t2[0];\n\t\t\t\t} else {\n\t\t\t\t\tt4 += Character.toString(t1[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (BadHanyuPinyinOutputFormatCombination e) {\n\t\t\te.printStackTrace();\n\t\t}\n\t\treturn t4;\n\t}\n\t\n\t//汉字转换成拼音的首字母\n\tpublic static String getPinYinHeadChar(String str) {\n\t\tString convert = "";\n\t\tfor (int j = 0; j < str.length(); j++) {\n\t\t\tchar word = str.charAt(j);\n\t\t\tString[] pinyinArray = PinyinHelper.toHanyuPinyinStringArray(word);\n\t\t\tif (pinyinArray != null) {\n\t\t\t\tconvert += pinyinArray[0].charAt(0);\n\t\t\t} else {\n\t\t\t\tconvert += word;\n\t\t\t}\n\t\t}\n\t\treturn convert;\n\t}\n//读取mai_config一个参数值\n    public static String getStringFromEnvconfig(String name) {\n\t\tResourceBundle resourceBundle = ResourceBundle.getBundle("mail_config");\n\t\treturn resourceBundle.getString(name);\n\t}\n//文件后缀名\n    public static String getFileSuffix(String fullName) {\n\t\treturn fullName.substring(fullName.lastIndexOf("."));\n\t}\n    \n    //判断图片的格式\n    public static boolean isPic(File file) {\n\t\tString suffix=Tools.getFileSuffix(file.getName());\n\t\tif (suffix.equalsIgnoreCase(".png")) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n//绑定用户名和密码并且加密\nSystem.out.println(new SimpleHash("SHA-1", "admin", "123987"));\npublic static String md5(String str) {\n\t\ttry {\n\t\t\tMessageDigest md = MessageDigest.getInstance("MD5");\n\t\t\tmd.update(str.getBytes());\n\t\t\tbyte b[] = md.digest();\n\n\t\t\tint i;\n\n\t\t\tStringBuffer buf = new StringBuffer("");\n\t\t\tfor (int offset = 0; offset < b.length; offset++) {\n\t\t\t\ti = b[offset];\n\t\t\t\tif (i < 0)\n\t\t\t\t\ti += 256;\n\t\t\t\tif (i < 16)\n\t\t\t\t\tbuf.append("0");\n\t\t\t\tbuf.append(Integer.toHexString(i));\n\t\t\t}\n\t\t\tstr = buf.toString();\n\t\t} catch (Exception e) {\n\t\t\te.printStackTrace();\n\n\t\t}\n\t\treturn str;\n\t}\n    \n    //当前日期减1\n    public static String beforeDate(){\n    \tDate now = new Date();\n    \tCalendar calendar = Calendar.getInstance();\n    \tcalendar.setTime(now);\n    \tint year = calendar.get(Calendar.YEAR);\n    \tint month = calendar.get(Calendar.MONTH)+1;\n    \tint day = calendar.get(Calendar.DAY_OF_MONTH);\n    \tString date = "";\n    \tint dayval = 0;\n    \tif (day!=1) {\n    \t\tdayval = day+(-1);\n    \t\tString monthval = "";\n    \t\tif (month<10) {\n    \t\t\tmonthval = "0"+String.valueOf(month);\n\t\t\t}else{\n\t\t\t\tmonthval = String.valueOf(month);\n\t\t\t}\n    \t\tString dayvalue = "";\n    \t\tif (dayval<10) {\n\t\t\t\tdayvalue = "0"+String.valueOf(dayval);\n\t\t\t}else{\n\t\t\t\tdayvalue = String.valueOf(dayval);\n\t\t\t}\n\t\t\tdate = String.valueOf(year)+"-"+monthval+"-"+dayvalue;\n\t\t}else{\n\t\t\tmonth = month + (-1);\n\t\t\tdayval = getMaxDays(year,month);\n\t\t\tString monthval = "";\n    \t\tif (month<10) {\n    \t\t\tmonthval = "0"+String.valueOf(month);\n\t\t\t}else{\n\t\t\t\tmonthval = String.valueOf(month);\n\t\t\t}\n    \t\tString dayvalue = "";\n    \t\tif (dayval<10) {\n\t\t\t\tdayvalue = "0"+String.valueOf(dayval);\n\t\t\t}else{\n\t\t\t\tdayvalue = String.valueOf(dayval);\n\t\t\t}\n\t\t\tdate = String.valueOf(year)+"-"+monthval+"-"+dayvalue;\n\t\t}\n\t\treturn date;\n    }\n    \n    //设置月份的天数\n    public static int getMaxDays(int year,int month){\n\t\tint days = -1;\n\t\tswitch (month) {\n\t\tcase 4:\n\t\tcase 6:\n\t\tcase 9:\n\t\tcase 11:\n\t\t\tdays = 30;\n\t\t\tbreak;\n\t\tcase 1:\n\t\tcase 3:\n\t\tcase 5:\n\t\tcase 7:\n\t\tcase 8:\n\t\tcase 10:\n\t\tcase 12:\n\t\t\tdays = 31;\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\t//判断该年是否闰年  \n\t\t\tif(isLeapYear(year)){//是闰年\n\t\t\t\tdays = 29;\n\t\t\t}else{\n\t\t\t\tdays = 28;\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tSystem.out.println("对不起,您的输入不合法!");\n\t\t\tbreak;\n\t\t}\n\t\treturn days;\n\t}\n    \n\t/**\n\t * 判断某年是否为闰年\n\t */\n\tpublic static boolean isLeapYear(int year){\n\t\t//内置的判断闰年的方法\n\t\tif((year%4==0 && year%100!=0)||year%400==0){\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n/**\n\t * 写本地txt里的单行内容\n\t * @param filePath  文件路径\n\t * @param content  写入的内容\n\t */\n\tpublic static void writeFile(String fileP,String content){\n\t\tString filePath = String.valueOf(Thread.currentThread().getContextClassLoader().getResource(""))+"../../";\t//项目路径\n\t\tfilePath = (filePath.trim() + fileP.trim()).substring(6).trim();\n\t\tif(filePath.indexOf(":") != 1){\n\t\t\tfilePath = File.separator + filePath;\n\t\t}\n\t\ttry {\n\t        OutputStreamWriter write = new OutputStreamWriter(new FileOutputStream(filePath),"utf-8");      \n\t        BufferedWriter writer=new BufferedWriter(write);          \n\t        writer.write(content);      \n\t        writer.close(); \n\t\t} catch (IOException e) {\n\t\t\te.printStackTrace();\n\t\t}\n\t}\n\n/**\n\t * 读取本地txt里的单行内容\n\t * @param filePath  文件路径\n\t */\n\tpublic static String readTxtFile(String fileP) {\n\t\ttry {\n\t\t\t\n\t\t\tString filePath = String.valueOf(Thread.currentThread().getContextClassLoader().getResource(""))+"../../";\t//项目路径\n\t\t\tfilePath = filePath.replaceAll("file:/", "");\n\t\t\tfilePath = filePath.replaceAll("%20", " ");\n\t\t\tfilePath = filePath.trim() + fileP.trim();\n\t\t\tif(filePath.indexOf(":") != 1){\n\t\t\t\tfilePath = File.separator + filePath;\n\t\t\t}\n\t\t\tString encoding = "utf-8";\n\t\t\tFile file = new File(filePath);\n\t\t\tif (file.isFile() && file.exists()) { \t\t// 判断文件是否存在\n\t\t\t\tInputStreamReader read = new InputStreamReader(\n\t\t\t\tnew FileInputStream(file), encoding);\t// 考虑到编码格式\n\t\t\t\tBufferedReader bufferedReader = new BufferedReader(read);\n\t\t\t\tString lineTxt = null;\n\t\t\t\twhile ((lineTxt = bufferedReader.readLine()) != null) {\n\t\t\t\t\treturn lineTxt;\n\t\t\t\t}\n\t\t\t\tread.close();\n\t\t\t}else{\n\t\t\t\tSystem.out.println("找不到指定的文件,查看此路径是否正确:"+filePath);\n\t\t\t}\n\t\t} catch (Exception e) {\n\t\t\tSystem.out.println("读取文件内容出错");\n\t\t}\n\t\treturn "";\n\t}\n\n/**获取项目路径\n\t * @return\n\t */\n\tpublic static String getClasspath(){\n\t\tString path = (String.valueOf(Thread.currentThread().getContextClassLoader().getResource(""))+"../../").replaceAll("file:/", "").replaceAll("%20", " ").trim();\t\n\t\tif(path.indexOf(":") != 1){\n\t\t\tpath = File.separator + path;\n\t\t}\n\t\treturn path;\n\t}\n\n//读取text文件值\nprivate static void init(){\n\t\t  \tSystem.out.println("现在开始调用了");\n\t        // 读取文件\n\t        FileInputStream fis = null;\n\t        String encoding="GBK";\n\t\t\ttry {\n\t\t\t\tString dfs = FileUpload.getTXTFile();\n\t\t\t  \tFile filesd = new File(dfs);\n\t\t\t\tFile[] files=filesd.listFiles();\n\t\t\t\tSystem.out.println(files.length);\n\t\t\t\tfor (File file : files) {\n\t\t\t\t\tif (file.isFile() && file.exists()){\n\t\t\t\t\t\tInputStreamReader read = new InputStreamReader(new FileInputStream(file),encoding);//考虑到编码格式\n\t\t\t            BufferedReader br = new BufferedReader(read);\n\t\t\t            String filename = file.getName();\n\t\t\t\t\t\tString line=null;\n\t\t\t\t\t\twhile((line = br.readLine())!=null){\n\t\t\t\t\t\t\tline = line.replaceAll(" +", ",");\n\t\t\t\t\t\t\tif (line.equals(",")) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tString[] arr = line.split(",");\n\t\t\t\t\t\t\tSystem.out.println("这是第"+filename.substring(0, 1)+"号机床的电流检测");\n\t\t\t\t\t\t\tSystem.out.println("电流检测时间:"+"20"+arr[0].replace("/", "-")+" "+arr[1]);\n\t\t\t\t\t\t\tSystem.out.println("a电流的值:"+arr[2]);\n\t\t\t\t\t\t\tSystem.out.println("b电流的值:"+arr[3]);\n\t\t\t\t\t\t\tSystem.out.println("c电流的值:"+arr[4]);\n\t\t\t\t\t\t\tSystem.out.println("三相电流的最大电流的值:"+arr[5]);\n\t\t\t\t\t\t\tSystem.out.println("机床的状态:"+arr[6]);\n\t\t\t\t\t\t\tSystem.out.println("机床状态的名称:"+arr[7]);\n\t\t\t\t\t\t\tSystem.out.println("停机时间:"+arr[8]);\n\t\t\t\t\t\t\tSystem.out.println("待机时间:"+arr[9]);\n\t\t\t\t\t\t\tSystem.out.println("加工时间:"+arr[10]);\n\t\t\t\t\t\t\tSystem.out.println("*****#####********");\n\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t}\n\t\t\t\t }else{\n\t\t\t            System.out.println("找不到指定的文件");\n\t\t\t     }\n\t\t\t\t\tSystem.out.println("第二个文本读取开始了,做好准备!!!!!");\n\t\t\t  }\n\t\t\t} catch (Exception e) {\n\t\t\t\tSystem.out.println("读取文件内容出错");\n\t\t\t\te.printStackTrace();\n\t\t\t}finally {\n\t\t\t\tif (fis!=null) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfis.close();\n\t\t\t\t\t} catch (IOException e) {\n\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t  }\n\n/**上传文件\n\t * @param file \t\t\t//文件对象\n\t * @param filePath\t\t//上传路径\n\t * @param fileName\t\t//文件名:上传什么保存什么\n\t * @return  文件名\n\t */\n\tpublic static String fileUpName(MultipartFile file, String filePath){\n\t\tString extName = ""; // 扩展名格式：\n\t\tString fileName = file.getOriginalFilename().substring(0,file.getOriginalFilename().lastIndexOf("."));//文件名\n\t\ttry {\n\t\t\tif (file.getOriginalFilename().lastIndexOf(".") >= 0){\n\t\t\t\textName = file.getOriginalFilename().substring(file.getOriginalFilename().lastIndexOf("."));\n\t\t\t}\n\t\t\tcopyFile(file.getInputStream(), filePath, fileName+extName).replaceAll("-", "");\n\t\t} catch (IOException e) {\n\t\t\tSystem.out.println(e);\n\t\t}\n\t\treturn fileName+extName;\n\t}\n\t\n\t/**\n\t * 读取制定路径下文件上传路径\n\t * @return\n\t */\n\tpublic static String getFile(){\n\t\tResourceBundle resourceBundle = ResourceBundle.getBundle("dbconfig");\n\t\tString fb = resourceBundle.getString("uploadURL");\n\t\treturn fb;\n\t}\nwindow.location.href=\'<%=basePath%>dvb/sd.do\';\n//隐藏or显示\nfunction dohidden(){\n\t\t\tif(jQuery("#searchid").is(\':hidden\')){\n\t\t\t\t$("#searchid").show();\n\t\t\t}else{\n\t\t\t\t$("#searchid").hide();\n\t\t\t} \n\t\t}\n//表头固定\n#simple-table tbody {\n\tdisplay:block;\n\theight:400px;\n\toverflow-y:scroll;\n}\n#simple-table thead,#simple-table tbody tr {\n\tdisplay:table;\n\twidth:100%;\n\ttable-layout:fixed;\n}\n#simple-table thead {\n\twidth: calc( 100% - 1em )\n}\n//字符溢出...\n.pathvalue{\n\t\twhite-space:nowrap; \n\t\ttext-overflow:ellipsis;\n\t\toverflow:hidden; \n\t}\n\n.table {\n\t    width: 100%;\n\t    max-width: 100%;\n\t    margin-bottom: 10px;\n\t    border-collapse: collapse;\n    \tborder-spacing: 0;\n\t}\n\n.th {\n    overflow: hidden;\n    white-space: nowrap;\n    text-align: center;\n}\n\n#GXL_NOTE{\n\t\tresize: none;\n\t}\n\n.tableclss{\n\t\tborder-width: 0px 1px 1px 0px;\n\t\tborder-style: solid;\n\t\tborder-color: #dddddd;\n\t\tborder-left: 1px solid #dddddd;\n\t\tborder-top:  1px solid #dddddd;\n\t} style="padding: 0px;"\nonchange="this.value=this.value.substring(0, 200)" onkeydown="this.value=this.value.substring(0, 200)" onkeyup="this.value=this.value.substring(0, 200)"\n\n//保存cookie\nfunction saveCookie() {\n\t\t\tif ($("#saveid").attr("checked")) {\n\t\t\t\t$.cookie(\'loginname\', $("#loginname").val(), {\n\t\t\t\t\texpires : 7\n\t\t\t\t});\n\t\t\t\t$.cookie(\'password\', $("#password").val(), {\n\t\t\t\t\texpires : 7\n\t\t\t\t});\n\t\t\t\t$.cookie(\'dbtype\', $("#dbtype option:selected").val(), {\n\t\t\t\t\texpires : 7\n\t\t\t\t});\n\t\t\t\t$.cookie(\'company_id\', $("#company_id option:selected").val(), {\n\t\t\t\t\texpires : 7\n\t\t\t\t});\n\t\t\t}\n\t\t}\n//取消cookie\nfunction savePaw() {\n\t\t\tif (!$("#saveid").attr("checked")) {\n\t\t\t\t$.cookie(\'loginname\', \'\', {\n\t\t\t\t\texpires : -1\n\t\t\t\t});\n\t\t\t\t$.cookie(\'password\', \'\', {\n\t\t\t\t\texpires : -1\n\t\t\t\t});\n\t\t\t\t$.cookie(\'dbtype\', \'\', {\n\t\t\t\t\texpires : -1\n\t\t\t\t});\n\t\t\t\t$.cookie(\'company_id\', \'\', {\n\t\t\t\t\texpires : -1\n\t\t\t\t});\n\t\t\t\t$("#loginname").val(\'\');\n\t\t\t\t$("#password").val(\'\');\n\t\t\t\t$("#dbtype").val(\'\');\n\t\t\t\t$("#company_id").val(\'\');\n\t\t\t}\n\t\t}\n//获取cookie\nvar loginname = $.cookie(\'loginname\');\nvar company_id = $.cookie(\'company_id\');\n\nfunction selectCompany(){\n\t\t\t$("#company_id").empty();\n\t\t\tvar dbtype = $("#dbtype option:selected").val();\n\t\t\t$.ajax({\n\t\t    \t type: "POST",\n\t\t    \t url:\'changeCompanyByDB\',\n\t\t         data:{dbtype:dbtype},\n\t\t         dataType:\'json\',\n\t\t         success : function(data) {\n\t\t        \t $("#company_id").append("<option value = \'0\'>所有</option>");\n\t\t        \t $.each(data.list, function(i, list){\n\t\t             \t$("#company_id").append("<option value = "+list.rec_id+">"+list.company_chn_name+"</option>");\n\t\t             });\n$("#dbtype option[value=\'"+dbtype+"\']").attr("selected",true);\n\t\t         }\n\t\t     });\n\t\t}\n//水平拖拉\n<script type="text/javascript">\n\t\t\n\t\t//水平拖拉\n\t\tvar tTD; //用来存储当前更改宽度的Table Cell,避免快速移动鼠标的问题 \n\t\tvar table = document.getElementById("simple-table"); \n\t\tfor (j = 1; j < table.rows[0].cells.length; j++) { \n\t\t\ttable.rows[0].cells[j].onmousedown = function () { \n\t\t\t\t//记录单元格 \n\t\t\t\ttTD = this; \n\t\t\t\tif (event.offsetX > tTD.offsetWidth - 10) { \n\t\t\t\t\ttTD.mouseDown = true; \n\t\t\t\t\ttTD.oldX = event.x; \n\t\t\t\t\ttTD.oldWidth = tTD.offsetWidth; \n\t\t\t\t} \n\t\t\t\t//记录Table宽度 \n\t\t\t\t//table = tTD; while (table.tagName != ‘TABLE\') table = table.parentElement; \n\t\t\t\t//tTD.tableWidth = table.offsetWidth; \n\t\t\t}; \n\t\t\ttable.rows[0].cells[j].onmouseup = function () { \n\t\t\t\t//结束宽度调整 \n\t\t\t\tif (tTD == undefined) tTD = this; \n\t\t\t\ttTD.mouseDown = false; \n\t\t\t\ttTD.style.cursor = \'default\'; \n\t\t\t}; \n\t\t\ttable.rows[0].cells[j].onmousemove = function () { \n\t\t\t\t//更改鼠标样式 \n\t\t\t\tif (event.offsetX > this.offsetWidth - 10) \n\t\t\t\tthis.style.cursor = \'col-resize\'; \n\t\t\t\telse \n\t\t\t\tthis.style.cursor = \'default\'; \n\t\t\t\t//取出暂存的Table Cell \n\t\t\t\tif (tTD == undefined) tTD = this; \n\t\t\t\t//调整宽度 \n\t\t\t\tif (tTD.mouseDown != null && tTD.mouseDown == true) { \n\t\t\t\t\ttTD.style.cursor = \'default\'; \n\t\t\t\t\tif (tTD.oldWidth + (event.x - tTD.oldX)>0) \n\t\t\t\t\ttTD.width = tTD.oldWidth + (event.x - tTD.oldX); \n\t\t\t\t\t//调整列宽 \n\t\t\t\t\ttTD.style.width = tTD.width; \n\t\t\t\t\ttTD.style.cursor = \'col-resize\'; \n\t\t\t\t\t//调整该列中的每个Cell \n\t\t\t\t\ttable = tTD; while (table.tagName != \'TABLE\') table = table.parentElement; \n\t\t\t\t\tfor (j = 1; j < table.rows.length; j++) { \n\t\t\t\t\t\ttable.rows[j].cells[tTD.cellIndex].width = tTD.width; \n\t\t\t\t\t} \n\t\t\t\t\t//调整整个表 \n\t\t\t\t\t//table.width = tTD.tableWidth + (tTD.offsetWidth – tTD.oldWidth); \n\t\t\t\t\t//table.style.width = table.width; \n\t\t\t\t} \n\t\t\t}; \n\t\t}\n\t\tvar tables = document.getElementById("ssimple-table"); \n\t\tfor (j = 1; j < tables.rows[0].cells.length; j++) { \n\t\t\ttables.rows[0].cells[j].onmousedown = function () { \n\t\t\t\t//记录单元格 \n\t\t\t\ttTD = this; \n\t\t\t\tif (event.offsetX > tTD.offsetWidth - 10) { \n\t\t\t\t\ttTD.mouseDown = true; \n\t\t\t\t\ttTD.oldX = event.x; \n\t\t\t\t\ttTD.oldWidth = tTD.offsetWidth; \n\t\t\t\t} \n\t\t\t\t//记录Table宽度 \n\t\t\t\t//table = tTD; while (table.tagName != ‘TABLE\') table = table.parentElement; \n\t\t\t\t//tTD.tableWidth = table.offsetWidth; \n\t\t\t}; \n\t\t\ttables.rows[0].cells[j].onmouseup = function () { \n\t\t\t\t//结束宽度调整 \n\t\t\t\tif (tTD == undefined) tTD = this; \n\t\t\t\ttTD.mouseDown = false; \n\t\t\t\ttTD.style.cursor = \'default\'; \n\t\t\t}; \n\t\t\ttables.rows[0].cells[j].onmousemove = function () { \n\t\t\t\t//更改鼠标样式 \n\t\t\t\tif (event.offsetX > this.offsetWidth - 10) \n\t\t\t\tthis.style.cursor = \'col-resize\'; \n\t\t\t\telse \n\t\t\t\tthis.style.cursor = \'default\'; \n\t\t\t\t//取出暂存的Table Cell \n\t\t\t\tif (tTD == undefined) tTD = this; \n\t\t\t\t//调整宽度 \n\t\t\t\tif (tTD.mouseDown != null && tTD.mouseDown == true) { \n\t\t\t\t\ttTD.style.cursor = \'default\'; \n\t\t\t\t\tif (tTD.oldWidth + (event.x - tTD.oldX)>0) \n\t\t\t\t\ttTD.width = tTD.oldWidth + (event.x - tTD.oldX); \n\t\t\t\t\t//调整列宽 \n\t\t\t\t\ttTD.style.width = tTD.width; \n\t\t\t\t\ttTD.style.cursor = \'col-resize\'; \n\t\t\t\t\t//调整该列中的每个Cell \n\t\t\t\t\ttables = tTD; while (tables.tagName != \'TABLE\') tables = tables.parentElement; \n\t\t\t\t\tfor (j = 1; j < tables.rows.length; j++) { \n\t\t\t\t\t\ttables.rows[j].cells[tTD.cellIndex].width = tTD.width; \n\t\t\t\t\t} \n\t\t\t\t\t//调整整个表 \n\t\t\t\t\t//table.width = tTD.tableWidth + (tTD.offsetWidth – tTD.oldWidth); \n\t\t\t\t\t//table.style.width = table.width; \n\t\t\t\t} \n\t\t\t}; \n\t\t}\n\t\t\n\t<\/script>\n//图形\n<script type="text/javascript" src="static/testcharts/highcharts.js"><\/script>\n\t<script type="text/javascript" src="static/testcharts/exporting.js"><\/script>\n\t<script type="text/javascript" src="static/testcharts/highcharts-zh_CN.js"><\/script>\n\t\t\n\noptions = {\n\t\t\t\t\tchart: {\n\t\t\t\t        renderTo: \'container\',\n\t\t\t\t        type: \'pie\'\n\t\t\t\t    },\n\t\t\t\t    title: {\n\t\t\t\t\t\ttext: \'2018 年各客户的比率\'\n\t\t\t\t\t},\n\t\t\t\t\tsubtitle: {\n\t\t\t\t\t\ttext: \'客户合计： 360\'\n\t\t\t\t\t},\n\t\t\t\t\ttooltip: {\n\t\t\t\t\t\tpointFormat: \'{series.name}: <b>{point.y}<b>比率：{point.percentage:.2f}%</b>\'\n\t\t\t\t\t},\n\t\t\t\t\texporting: { enabled: false },\n\t\t\t\t\tcredits: { enabled: false },\n\t\t\t\t\tplotOptions: {\n\t\t\t\t\t\tpie: {\n\t\t\t\t\t\t\tallowPointSelect: true,\n\t\t\t\t\t\t\tcursor: \'pointer\',\n\t\t\t\t\t\t\tdataLabels: {\n\t\t\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\t\t\tformatter: function() {\n\t\t\t\t\t\t\t        return \'\'+ this.point.name +\'<br/>值 ：\'+ this.y + \'，占比\' + this.percentage.toFixed(2) + \'%\';\n\t\t\t\t\t\t\t      }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tseries: [{\n\t\t\t\t\t\tname: \'数据\',\n\t\t\t\t\t\tcolorByPoint: true,\n\t\t\t\t\t\tdata: [{\n\t\t\t\t\t\t\tname: \'客户1\',\n\t\t\t\t\t\t\ty: 32.41,\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tname: \'客户2\',\n\t\t\t\t\t\t\ty: 21.84\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tname: \'客户3\',\n\t\t\t\t\t\t\ty: 40.85\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tname: \'客户4\',\n\t\t\t\t\t\t\ty: 54.67\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tname: \'客户5\',\n\t\t\t\t\t\t\ty: 68.18\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tname: \'客户6\',\n\t\t\t\t\t\t\ty: 57.05\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tname: \'客户7\',\n\t\t\t\t\t\t\ty: 27.05\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tname: \'客户8\',\n\t\t\t\t\t\t\ty: 68.05\n\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t\ttransactionChart = new Highcharts.Chart(options);\n\n$.post(\'<%=basePath%>current_detection/listForTransactionChartEveryYear.do\',{\n\t\t\t\tyear:year,ROOM_GROUP:ROOM_GROUP,TYPE_GROUP:TYPE_GROUP\n\t\t    \t},function(jsonData){\n\t\t    \t\tvar series1={\n\t    \t\t\t\t\tname: \'停机时间\',\n\t    \t\t\t\t\tdata: [],\n\t    \t\t\t\t\tcolor: \'red\'\n\t    \t\t\t    };\n\t\t    \t\tif(jsonData.length>0){\n\t\t    \t    \t$.each(jsonData, function(yearName,val){\n\t\t    \t    \t\toptionsEveryYear.xAxis.categories.push(val.year+\'年\');\n\t\t    \t\t\t\tseries1.data.push(val.stopCount);\n\t\t\t    \t\t});\n\t\t    \t\t}else{\n\t    \t\t\t\tseries1.data.push(\'0\');\n\t    \t\t\t}\n\t\t    \t    \toptionsEveryYear.series.push(series1);\n\t\t    \t\tvar series2={\n\t    \t\t\t\t\tname: \'待机时间\',\n\t    \t\t\t\t\tdata: [],\n\t    \t\t\t\t\tcolor: \'green\'\n\t    \t\t\t    };\n\t\t    \t    \t$.each(jsonData, function(yearName,val){\n\t\t    \t    \t\toptionsEveryYear.xAxis.categories.push(val.year+\'年\');\n\t\t    \t\t\t\tseries2.data.push(val.waitCount);\n\t\t\t    \t\t});\n\t\t    \t    \toptionsEveryYear.series.push(series2);\n\t\t    \t\tvar series={\n\t    \t\t\t\t\tname: \'加工时间\',\n\t    \t\t\t\t\tdata: [],\n\t    \t\t\t\t\tcolor: \'blue\'\n\t    \t\t\t    };\n\t\t    \t    \t$.each(jsonData, function(yearName,val){\n\t\t    \t\t\t\toptionsEveryYear.xAxis.categories.push(val.year+\'年\');\n\t\t    \t\t\t\tseries.data.push(val.runCount);\n\t\t\t    \t\t});\n\t\t    \t    optionsEveryYear.series.push(series);\n\t\t    \t    transactionChartEveryYear = new Highcharts.Chart(optionsEveryYear);\n\t\t    \t},\'json\'\n\t\t\t); \n\nfunction drawChartEveryYear(){\n\t\tvar year = yearCombobox.combobox("getValue"); //获取年份\n\t\tvar TYPE_GROUP = $("#TYPE_GROUP option:selected").val();\n\t\tvar ROOM_GROUP = $("#ROOM_GROUP option:selected").val();\n\t\toptionsEveryYear = {\n\t\t\t\t\tchart: {\n\t\t\t\t        renderTo: \'transactionChartDivEveryYear\',\n\t\t\t\t        type: \'column\'\n\t\t\t\t    }, \n\t\t\t\t    title: {\n\t\t\t\t        text: \'历年时间\'\n\t\t\t\t    },\n\t\t\t\t    xAxis: {\n\t\t\t\t    \tcategories: []\n\t\t\t\t    },\n\t\t\t\t    yAxis: {\n\t\t\t\t        title: {\n\t\t\t\t            text: \'时间单位:小时\'\n\t\t\t\t        },\n\t\t\t\t        stackLabels: { enabled: true }\n\t\t\t\t    },\n\t\t\t\t    tooltip: {\n\t\t\t            headerFormat: \'<span style="font-size:10px">{point.key}</span><table>\',\n\t\t\t            pointFormat: \'<tr><td style="color:{series.color};padding:0">{series.name}: </td>\' +\n\t\t\t            \'<td style="padding:0"><b>{point.y:.1f}小时</b></td></tr>\',\n\t\t\t            footerFormat: \'</table>\',\n\t\t\t            shared: true,\n\t\t\t            useHTML: true\n\t\t\t        },\n\t\t\t\t    plotOptions: {\n\t\t\t\t        series: {\n\t\t\t\t            cursor: \'pointer\'\n\t\t\t\t        },\n\t\t\t\t        column: { stacking: \'normal\', dataLabels: { enabled: true } }\n\t\t\t\t    },\n\t\t\t\t    series:[]\n\t\t\t\t};\n\t\t\t$.post(\'<%=basePath%>current_detection/listForTransactionChartEveryYear.do\',{\n\t\t\t\tyear:year,ROOM_GROUP:ROOM_GROUP,TYPE_GROUP:TYPE_GROUP\n\t\t    \t},function(jsonData){\n\t\t    \t\tvar series1={\n\t    \t\t\t\t\tname: \'停机时间\',\n\t    \t\t\t\t\tdata: [],\n\t    \t\t\t\t\tcolor: \'red\'\n\t    \t\t\t    };\n\t\t    \t\tif(jsonData.length>0){\n\t\t    \t    \t$.each(jsonData, function(yearName,val){\n\t\t    \t    \t\toptionsEveryYear.xAxis.categories.push(val.year+\'年\');\n\t\t    \t\t\t\tseries1.data.push(val.stopCount);\n\t\t\t    \t\t});\n\t\t    \t\t}else{\n\t    \t\t\t\tseries1.data.push(\'0\');\n\t    \t\t\t}\n\t\t    \t    \toptionsEveryYear.series.push(series1);\n\t\t    \t\tvar series2={\n\t    \t\t\t\t\tname: \'待机时间\',\n\t    \t\t\t\t\tdata: [],\n\t    \t\t\t\t\tcolor: \'green\'\n\t    \t\t\t    };\n\t\t    \t    \t$.each(jsonData, function(yearName,val){\n\t\t    \t    \t\toptionsEveryYear.xAxis.categories.push(val.year+\'年\');\n\t\t    \t\t\t\tseries2.data.push(val.waitCount);\n\t\t\t    \t\t});\n\t\t    \t    \toptionsEveryYear.series.push(series2);\n\t\t    \t\tvar series={\n\t    \t\t\t\t\tname: \'加工时间\',\n\t    \t\t\t\t\tdata: [],\n\t    \t\t\t\t\tcolor: \'blue\'\n\t    \t\t\t    };\n\t\t    \t    \t$.each(jsonData, function(yearName,val){\n\t\t    \t\t\t\toptionsEveryYear.xAxis.categories.push(val.year+\'年\');\n\t\t    \t\t\t\tseries.data.push(val.runCount);\n\t\t\t    \t\t});\n\t\t    \t    optionsEveryYear.series.push(series);\n\t\t    \t    transactionChartEveryYear = new Highcharts.Chart(optionsEveryYear);\n\t\t    \t},\'json\'\n\t\t\t);\n\t\t}\n\nfunction drawChartEveryYear(){\n\t\tvar year = yearCombobox.combobox("getValue"); //获取年份\n\t\tvar TYPE_GROUP = $("#TYPE_GROUP option:selected").val();\n\t\tvar MONTH = $("#MONTH option:selected").val();\n\t\tvar ROOM_GROUP = $("#ROOM_GROUP option:selected").val();\n\t\toptionsEveryYear = {\n\t\t\t\t\tchart: {\n\t\t\t\t        renderTo: \'transactionChartDivEveryYear\'\n\t\t\t\t    }, \n\t\t\t\t    title: {\n\t\t\t\t        text: \'日期时间\'\n\t\t\t\t    },\n\t\t\t\t    xAxis: {\n\t\t\t\t    \tcategories: []\n\t\t\t\t    },\n\t\t\t\t    yAxis: {\n\t\t\t\t        title: {\n\t\t\t\t            text: \'时间单位:小时\'\n\t\t\t\t        },\n\t\t\t\t        stackLabels: { enabled: true }\n\t\t\t\t    },\n\t\t\t\t    tooltip: {\n\t\t\t            /* headerFormat: \'<span style="font-size:10px">{point.key}</span><table>\',\n\t\t\t            pointFormat: \'<tr><td style="color:{series.color};padding:0">{series.name}: </td>\' +\n\t\t\t            \'<td style="padding:0"><b>{point.y:.1f}</b></td></tr>\',\n\t\t\t            footerFormat: \'</table>\', */\n\t\t\t            shared: true,\n\t\t\t            useHTML: true\n\t\t\t        },\n\t\t\t\t    plotOptions: {\n\t\t\t\t        series: {\n\t\t\t\t            cursor: \'pointer\'\n\t\t\t\t        },\n\t\t\t\t        column: { stacking: \'normal\', dataLabels: { enabled: true } }\n\t\t\t\t    },\n\t\t\t\t    series:[]\n\t\t\t\t};\n\t\t\t$.post(\'<%=basePath%>current_detection/listForTransactionChartEveryMonth.do\',{\n\t\t\t\tyear:year,ROOM_GROUP:ROOM_GROUP,TYPE_GROUP:TYPE_GROUP,MONTH:MONTH\n\t\t    \t},function(jsonData){\n\t\t    \t\tvar series1={\n\t    \t\t\t\t\tname: \'停机时间\',\n\t    \t\t\t\t\tdata: [],\n\t    \t\t\t\t\tcolor: \'red\',\n\t    \t\t\t\t\ttype: \'column\',\n    \t\t\t\t\t\ttooltip: {\n    \t\t\t\t\t\t\tvalueSuffix: \'小时\'\n    \t\t\t\t\t\t}\n\t    \t\t\t    };\n\t\t    \t\tif(jsonData.length>0){\n\t\t    \t    \t$.each(jsonData, function(yearName,val){\n\t\t    \t    \t\toptionsEveryYear.xAxis.categories.push(val.year);\n\t\t    \t\t\t\tseries1.data.push(val.stopCount);\n\t\t\t    \t\t});\n\t\t    \t\t}else{\n\t    \t\t\t\tseries1.data.push(\'0\');\n\t    \t\t\t}\n\t\t    \t    \toptionsEveryYear.series.push(series1);\n\t\t    \t\tvar series2={\n\t    \t\t\t\t\tname: \'待机时间\',\n\t    \t\t\t\t\tdata: [],\n\t    \t\t\t\t\tcolor: \'green\',\n\t    \t\t\t\t\ttype: \'column\',\n    \t\t\t\t\t\ttooltip: {\n    \t\t\t\t\t\t\tvalueSuffix: \'小时\'\n    \t\t\t\t\t\t}\n\t    \t\t\t    };\n\t\t    \t    \t$.each(jsonData, function(yearName,val){\n\t\t    \t    \t\toptionsEveryYear.xAxis.categories.push(val.year);\n\t\t    \t\t\t\tseries2.data.push(val.waitCount);\n\t\t\t    \t\t});\n\t\t    \t    \toptionsEveryYear.series.push(series2);\n\t\t    \t\tvar series={\n\t    \t\t\t\t\tname: \'加工时间\',\n\t    \t\t\t\t\tdata: [],\n\t    \t\t\t\t\tcolor: \'blue\',\n\t    \t\t\t\t\ttype: \'column\',\n    \t\t\t\t\t\ttooltip: {\n    \t\t\t\t\t\t\tvalueSuffix: \'小时\'\n    \t\t\t\t\t\t}\n\t    \t\t\t    };\n\t\t    \t    \t$.each(jsonData, function(yearName,val){\n\t\t    \t\t\t\toptionsEveryYear.xAxis.categories.push(val.year);\n\t\t    \t\t\t\tseries.data.push(val.runCount);\n\t\t\t    \t\t});\n\t\t    \t    optionsEveryYear.series.push(series);\n\t\t    \t    var series3={\n\t    \t\t\t\t\tname: \'加工时间比率\',\n\t    \t\t\t\t\tdata: [],\n\t    \t\t\t\t\tcolor: \'SpringGreen\',\n    \t\t\t\t\t\ttype: \'spline\',\n    \t\t\t\t\t\ttooltip: {\n    \t\t\t\t\t\t\tvalueSuffix: \'%\'\n    \t\t\t\t\t\t}\n\t    \t\t\t    };\n\t\t    \t    \t$.each(jsonData, function(yearName,val){\n\t\t    \t    \t\t//var jgbl = sum(val.stopCount,val.waitCount,val.runCount);\n\t\t    \t    \t\toptionsEveryYear.xAxis.categories.push(val.year);\n\t\t    \t\t\t\tseries3.data.push(val.jgbl);\n\t\t\t    \t\t});\n\t\t    \t    \toptionsEveryYear.series.push(series3);\n\t\t    \t    transactionChartEveryYear = new Highcharts.Chart(optionsEveryYear);\n\t\t    \t},\'json\'\n\t\t\t);\n\t\t}\n//echarts\nfunction show(date1,date2,date3,date4,date5,date6,date7,date8,date9,date10,date11,date12){\n\t\t\t\t\t\t\t\t /* // 柱状图\n\t\t\t\t\t\t        var myChartBar = echarts.init(document.getElementById(\'mainBar\'));\n\t\t\t\t\t\t        // 指定图表的配置项和数据\n\t\t\t\t\t\t\t\tvar optionBar = {\n\t\t\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t                text: \'时间统计\'\n\t\t\t\t\t\t\t            },\n\t\t\t\t\t\t\t            tooltip: {},\n\t\t\t\t\t\t\t            xAxis: {\n\t\t\t\t\t\t\t                data: ["停止时间","待机时间","离线时间","运行时间"]\n\t\t\t\t\t\t\t            },\n\t\t\t\t\t\t\t            yAxis:\n\t\t\t\t\t\t\t                {\n\t\t\t\t\t\t\t            \n\t\t\t\t\t\t\t            },\n\t\t\t\t\t\t            series: [\n\t\t\t\t\t\t               {\n\t\t\t\t\t\t               \tname: \'当日时间\',\n\t\t\t\t\t\t\t\t        type: \'bar\',\n\t\t\t\t\t\t\t\t        data: [{\n\t\t\t\t\t\t\t\t            value: date1,\n\t\t\t\t\t\t\t\t            name: \'停止时间\',\n\t\t\t\t\t\t\t\t            itemStyle:carStyle\n\t\t\t\t\t\t\t\t        },{\n\t\t\t\t\t\t\t\t            value: date2,\n\t\t\t\t\t\t\t\t            name: \'待机时间\',\n\t\t\t\t\t\t\t\t            itemStyle:goodStyle\n\t\t\t\t\t\t\t\t        },{\n\t\t\t\t\t\t\t\t            value: date3,\n\t\t\t\t\t\t\t\t            name: \'离线时间\',\n\t\t\t\t\t\t\t\t            itemStyle:carStyle\n\t\t\t\t\t\t\t\t        },{\n\t\t\t\t\t\t\t\t            value: date4,\n\t\t\t\t\t\t\t\t            name: \'运行时间\',\n\t\t\t\t\t\t\t\t            itemStyle:goodStyle\n\t\t\t\t\t\t\t\t        }]\n\t\t\t\t\t\t\t\t    }]\n\t\t\t\t\t\t        };\t        \n\t\t\t\t\t\t        // 使用刚指定的配置项和数据显示图表。\n\t\t\t\t\t\t        myChartBar.setOption(optionBar); */\n\t\t\t\t\t\t      //月度块状图\n\t\t\t\t\t\t        var myChartBar = echarts.init(document.getElementById(\'mainBar\'));\n\t\t\t\t\t\t\n\t\t\t\t\t\t        // 指定图表的配置项和数据\n\t\t\t\t\t\t\t\tvar optionBar = {\n\t\t\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\t        text: date11+\'/\'+date12+\'月份统计示意图\',\n\t\t\t\t\t\t\t\t\t        subtext: \'总共时间:\'+date5+\'小时\',\n\t\t\t\t\t\t\t\t\t        subtextStyle: {\n\t\t\t\t\t\t\t\t\t            color: \'black\',  // 副标题文字颜色\n\t\t\t\t\t\t\t\t\t        },\n\t\t\t\t\t\t\t\t\t        x:\'center\'\n\t\t\t\t\t\t\t\t\t    },\n\t\t\t\t\t\t\t\t\t    \ttooltip: {\n\t\t\t\t\t\t\t\t\t\t        trigger: \'item\',\n\t\t\t\t\t\t\t\t\t\t        formatter: "{a} <br/>{b} : {c} ({d}%)"\n\t\t\t\t\t\t\t\t\t\t    },\n\t\t\t\t\t\t\t\t\t    tooltip: {\n\t\t\t\t\t\t\t\t\t        trigger: \'item\',\n\t\t\t\t\t\t\t\t\t        formatter: "{a} <br/>{b} : {c} ({d}%)"\n\t\t\t\t\t\t\t\t\t    },\n\t\t\t\t\t\t\t\t\t    legend: {\n\t\t\t\t\t\t\t\t\t        orient: \'vertical\',\n\t\t\t\t\t\t\t\t\t        left: \'left\',\n\t\t\t\t\t\t\t\t\t        data: ["停止时间","待机时间","加工时间"]\n\t\t\t\t\t\t\t\t\t    },\n\t\t\t\t\t\t\t\t\t   \n\t\t\t\t\t\t            series: [\n\t\t\t\t\t\t               {\n\t\t\t\t\t\t               name: date11+\'/\'+date12+\'月份统计\',\n\t\t\t\t\t\t\t\t        type: \'pie\',\n\t\t\t\t\t\t\t\t        radius: \'55%\',\n\t\t\t\t\t\t\t\t        center: [\'50%\', \'60%\'],\n\t\t\t\t\t\t\t\t        data: [{\n\t\t\t\t\t\t\t\t            value: parseFloat(date1),\n\t\t\t\t\t\t\t\t            name: \'停止时间\',\n\t\t\t\t\t\t\t\t            itemStyle:carStyle\n\t\t\t\t\t\t\t\t        },{\n\t\t\t\t\t\t\t\t            value: parseFloat(date2),\n\t\t\t\t\t\t\t\t            name: \'待机时间\',\n\t\t\t\t\t\t\t\t            itemStyle:goodStyle\n\t\t\t\t\t\t\t\t        },{\n\t\t\t\t\t\t\t\t            value: parseFloat(date4),\n\t\t\t\t\t\t\t\t            name: \'加工时间\',\n\t\t\t\t\t\t\t\t            itemStyle:goodStyle2\n\t\t\t\t\t\t\t\t        }]\n\t\t\t\t\t\t\t\t    }]\n\t\t\t\t\t\t        };\t        \n\n\t\t\t\t\t\t        // 使用刚指定的配置项和数据显示图表。\n\t\t\t\t\t\t        myChartBar.setOption(optionBar);\n\t\t\t\t\t\t        \n\t\t\t\t\t\t        //块状图\n\t\t\t\t\t\t        var myChart = echarts.init(document.getElementById(\'main\'));\n\t\t\t\t\t\t\n\t\t\t\t\t\t        // 指定图表的配置项和数据\n\t\t\t\t\t\t\t\tvar option = {\n\t\t\t\t\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\t\t\t        text: date11+\'年统计示意图\',\n\t\t\t\t\t\t\t\t\t        subtext: \'总共时间:\'+date10+\'小时\',\n\t\t\t\t\t\t\t\t\t        subtextStyle: {\n\t\t\t\t\t\t\t\t\t            color: \'black\',  // 副标题文字颜色\n\t\t\t\t\t\t\t\t\t        },\n\t\t\t\t\t\t\t\t\t        x:\'center\'\n\t\t\t\t\t\t\t\t\t    },\n\t\t\t\t\t\t\t\t\t    \ttooltip: {\n\t\t\t\t\t\t\t\t\t\t        trigger: \'item\',\n\t\t\t\t\t\t\t\t\t\t        formatter: "{a} <br/>{b} : {c} ({d}%)"\n\t\t\t\t\t\t\t\t\t\t    },\n\t\t\t\t\t\t\t\t\t    tooltip: {\n\t\t\t\t\t\t\t\t\t        trigger: \'item\',\n\t\t\t\t\t\t\t\t\t        formatter: "{a} <br/>{b} : {c} ({d}%)"\n\t\t\t\t\t\t\t\t\t    },\n\t\t\t\t\t\t\t\t\t    legend: {\n\t\t\t\t\t\t\t\t\t        orient: \'vertical\',\n\t\t\t\t\t\t\t\t\t        left: \'left\',\n\t\t\t\t\t\t\t\t\t        data: ["停止时间","待机时间","加工时间"]\n\t\t\t\t\t\t\t\t\t    },\n\t\t\t\t\t\t\t\t\t   \n\t\t\t\t\t\t            series: [\n\t\t\t\t\t\t               {\n\t\t\t\t\t\t               name: date11+\'年统计\',\n\t\t\t\t\t\t\t\t        type: \'pie\',\n\t\t\t\t\t\t\t\t        radius: \'55%\',\n\t\t\t\t\t\t\t\t        center: [\'50%\', \'60%\'],\n\t\t\t\t\t\t\t\t        data: [{\n\t\t\t\t\t\t\t\t            value: parseFloat(date6),\n\t\t\t\t\t\t\t\t            name: \'停止时间\',\n\t\t\t\t\t\t\t\t            itemStyle:carStyle\n\t\t\t\t\t\t\t\t        },{\n\t\t\t\t\t\t\t\t            value: parseFloat(date7),\n\t\t\t\t\t\t\t\t            name: \'待机时间\',\n\t\t\t\t\t\t\t\t            itemStyle:goodStyle\n\t\t\t\t\t\t\t\t        },{\n\t\t\t\t\t\t\t\t            value: parseFloat(date9),\n\t\t\t\t\t\t\t\t            name: \'加工时间\',\n\t\t\t\t\t\t\t\t            itemStyle:goodStyle2\n\t\t\t\t\t\t\t\t        }]\n\t\t\t\t\t\t\t\t    }]\n\t\t\t\t\t\t        };\t        \n\n\t\t\t\t\t\t        // 使用刚指定的配置项和数据显示图表。\n\t\t\t\t\t\t        myChart.setOption(option);\n\t\t\t\t\t\t}\n\n//图表导出\n\t\tfunction exportChart() {\n\t\t\t$(\'#container\').highcharts().exportChart({\n\t\t\t\texportFormat : \'PDF\'\n\t\t\t});\n\t \t\t//下载 PNG 文件，下载 JPEG 图片，下载 PDF 文件，下载 SVG 文件，\n\t\t}\n<%\n\tString path = request.getContextPath();\n\tString basePath = request.getScheme() + "://" + request.getServerName() + ":" + request.getServerPort()\n\t\t\t+ path + "/";\n%>\n//form提交\n\t\t$.ajax({\n\t\t    \t type: "POST",\n\t\t    \t url:\'<%=basePath%>\',\n\t\t         data:$("#Form").serialize(),\n\t\t         dataType:\'json\',\n\t\t         cache: false,\n\t\t         success : function(data) {\n\t\t\t\n\t\t\t }\n\t\t     });\n\n//复选框全选控制\n\t\t\tvar active_class = \'active\';\n\t\t\t$(\'#simple-table > thead > tr > th input[type=checkbox]\').eq(0).on(\'click\', function(){\n\t\t\t\tvar th_checked = this.checked;//checkbox inside "TH" table header\n\t\t\t\t$(this).closest(\'table\').find(\'tbody > tr\').each(function(){\n\t\t\t\t\tvar row = this;\n\t\t\t\t\tif(th_checked) $(row).addClass(active_class).find(\'input[type=checkbox]\').eq(0).prop(\'checked\', true);\n\t\t\t\t\telse $(row).removeClass(active_class).find(\'input[type=checkbox]\').eq(0).prop(\'checked\', false);\n\t\t\t\t});\n\t\t\t});\n//select带检索\n<link rel="stylesheet" href="static/js/choosejscss/style.css" />\n\t<script type="text/javascript" src="static/js/choosejscss/jquery.chose.js"><\/script>\n$(\'#sal_id\').searchableSelect();\n\n//1种循环跳出\n<c:forEach items="${workshopList}" var="workshop" varStatus="vs">\n\t<tr id="tb">\n\t<c:set value="0" var="isDoing"></c:set>\n\t<c:forEach items="${map}" var="map">\n\t<c:if test="${map.key==workshop.rec_id}">\n\t<c:if test="${isDoing ne \'1\'}">\n<td class=\'center\'><input style=\'width:90px;text-align: center;\' id="H_CHARGE3_${workshop.rec_id}" value="${map.value.H_CHARGE3}" maxlength=\'10\' onkeyup="keyup(this)" onkeyPress="keyPress(this)" onblur="blur(this)" placeholder="请输入外部其他单价" title="外部其他单价"></td>\n\t</c:if>\n\t<c:set value="1" var="isDoing"></c:set>\n\t</c:if>\n</c:forEach>\n<c:if test="${map.key!=workshop.rec_id && isDoing ne \'1\'}">\n\t<td class=\'center\' >\n\t<input style=\'width:90px;text-align: center;\' id="H_CHARGE3_${workshop.rec_id}" value="0.0" maxlength=\'10\' onkeyup="keyup(this)" onkeyPress="keyPress(this)" onblur="blur(this)" placeholder="请输入外部其他单价" title="外部其他单价">\n\t</td>\n</c:if>\n\n//2种循环跳出\n<c:forEach items="${varList}" var="var" varStatus="vs">\n\t<tr>\n\n\t</tr>\n\t<c:forEach items="${map}" var="vars">\n\t<c:if test="${vars.key==var.VIEWJOB_ID}">\n\t<c:forEach items="${var1List}" var="var2" >\n\t\t<c:set var="isDoing" value="0"/>  \n\t\t<c:set var="flag" value="false"/> \n\t\t<c:forEach items="${vars.value}" var="var0" varStatus="i">\n\t\t<c:if test="${var2.CODE==var0.CODE}">\n\t\t\t<c:set var="isDoing" value="1"/> \n\t\t\t<c:set var="flag" value="true"/>  \n    \t\t</c:if> \n\t\t<c:if test="${isDoing==1}">\n\t\t\t<td id="fixedcontent" bgcolor="yellow"><font color="black"><fmt:formatNumber>${var0.SCH_DAYS}</fmt:formatNumber></font></td>\n\t\t<c:set var="isDoing" value="0"/>\n\t\t</c:if>\n\t\t<c:if test="${i.last && flag == false}"> \n\t\t\t<td colspan="3">&nbsp;&nbsp;</td> \n\t\t</c:if>\t\t\t\t\t\t\t\t\t\t\t\t</c:forEach>\n\t</c:forEach>\t\n</c:forEach>\t\t\n\t\t\n<script src="static/ace/js/date/date-js.js"><\/script>\n//日期控件 选择年月\n            $(".test").simpleCanleder(); \n//下载\n@RequestMapping(value="/downFile")\n\tpublic void downFile(HttpServletRequest request, HttpServletResponse response,HttpSession session)throws IOException {\n\t\tlogBefore(logger, Jurisdiction.getUsername()+"下载附件");\n\t\tString fileName = request.getParameter("FILE_NAME1");\n\t\tfileName = new String(fileName.getBytes("ISO8859-1"),"UTF-8");\n\t\tString basePath = fileName;\n\t    InputStream in = new FileInputStream(new File(basePath));\n\t\tString titleName = null;\n\t\ttitleName = fileName.substring(fileName.lastIndexOf("/")+1);\n\t\tresponse.reset();  \n\t    response.setContentType("application/octet-stream");  \n\t\tresponse.setHeader("Content-disposition", "attachment;filename="\n\t\t\t\t\t\t\t+ new String(titleName.getBytes("utf-8"), "ISO8859-1"));\n\t\tOutputStream out = response.getOutputStream();\n\t\tbyte[] b = new byte[1024];\n\t\tint len = -1;\n\t\twhile ((len = in.read(b)) != -1){\n\t\t\tout.write(b, 0, len);\n\t\t}\n\t\t// 关闭\n\t\tout.close();\n\t\tin.close();\n\t}\n\nJSONArray arr = JSONArray.fromObject(list);\nString json = arr.toString();\njson = json.replaceAll("rec_id", "id").replaceAll("PARENT_SYS_RES_CODE", "pId").replaceAll("assemble", "name").replaceAll("subDepart", "nodes").replaceAll("hasDepart", "checked").replaceAll("departUrl", "url").replaceAll("openDepart", "open");\nmodel.addAttribute("zTreeNodes", json);\n//递归\npublic List<Bas_depart> listAllDerpart(String departid, String company_id,String dbtype){\n List<Bas_depart> departList = this.listDepartByParentId(departid,company_id,dbtype);\n\tfor(Bas_depart depart : departList){\n\t depart.setDepartUrl("bas_depart/list.do?depart_id="+depart.getRec_id()+"&company_id="+depart.getCOMPANY_ID());\n\t depart.setAssemble(depart.getCODE()+" "+depart.getNAME());\n\t depart.setSubDepart(this.listAllDerpart(depart.getRec_i(),company_id,dbtype));\n\t depart.setTarget("treeFrame");\n\t}\n\treturn departList;\n}\t\n//select 切换时间\nfunction codeChange(){\n\t        var option = $("#sal_id option:selected");\n\t        var title = option.attr(\'title\');\n\t        var tx_maxvalue = document.getElementById("sal_idtx");\n\t        $("#sal_idtx").empty();\n\t        for(var i=0;i<=title;i++){\n\t        \ttx_maxvalue.options.add(new Option(i,i)); \n\t\t\t}\n\t        $("#sal_idtx").val(title);\n        }\n\n//批量审核\nfunction updateStatus(status){\n\t\tvar nodes = zTree.getCheckedNodes();\n\t\tvar tmpNode;\n\t\tvar ids = "";\n\t\tfor(var i=0; i<nodes.length; i++){\n\t\t\ttmpNode = nodes[i];\n\t\t\tif(i!=nodes.length-1){\n\t\t\t\tids += tmpNode.id+",";\n\t\t\t}else{\n\t\t\t\tids += tmpNode.id;\n\t\t\t}\n\t\t}\n\t\tif(ids==\'\'){\n\t\t\talert("请选择要审核的数据")\n\t\t}else{\n\t\t\t$.ajax({\n\t\t\t\ttype: "POST",\n\t\t\t\turl: \'<%=basePath%>job_part/updateAllStatus.do\',\n\t\t\t    \tdata: {DATA_IDS:ids,SH_FLAG:status},\n\t\t\t\tdataType:\'json\',\n\t\t\t\tcache: false,\n\t\t\t\tsuccess: function(data){\n\t\t\t\t\t $.each(data.list, function(i, list){\n\t\t\t\t\t\tif("ok" ==list.msg){\n\t\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t\t }\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n//选择\t动态在父类插入tobody(tr)\n\t\tfunction save(company_id){\n\t\t    var str = \'\';\n\t\t\tfor(var i=0;i < document.getElementsByName(\'ids\').length;i++){\n\t\t\t  if(document.getElementsByName(\'ids\')[i].checked){\n\t\t\t  \tif(str==\'\') str += document.getElementsByName(\'ids\')[i].value;\n\t\t\t  \telse str += \',\' + document.getElementsByName(\'ids\')[i].value;\n\t\t\t  }\n\t\t\t}\n\t\t\tif(str==\'\'){\n\t\t\t\t$("#zcheckbox").tips({\n\t\t\t\t\tside:1,\n\t\t            msg:\'点这里选择\',\n\t\t            bg:\'#AE81FF\',\n\t\t            time:8\n\t\t        });\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tparent.$("#trparts tr").remove();\n\t\t\tvar arr_ids = str.split(",");\n\t\t\tfor(var j=0;j<arr_ids.length;j++){\n\t\t\t\tif(arr_ids[j]==\'\'){\n\t\t\t\t\tbreak;\n\t\t\t\t}else{\n\t\t\t\t\tvar pur_ordercode = document.getElementById("pur_ordercode"+arr_ids[j]).innerHTML;\n\t\t\t\t\tvar pur_no = document.getElementById("pur_no"+arr_ids[j]).innerHTML;\n\t\t\t\t\tvar job_code = document.getElementById("job_code"+arr_ids[j]).innerHTML;\n\t\t\t\t\tvar mat_code = document.getElementById("mat_code"+arr_ids[j]).innerHTML;\n\t\t\t\t\tvar mat_name = document.getElementById("mat_name"+arr_ids[j]).innerHTML;\n\t\t\t\t\tvar part_code = document.getElementById("part_code"+arr_ids[j]).innerHTML;\n\t\t\t\t\tvar part_name = document.getElementById("part_name"+arr_ids[j]).innerHTML;\n\t\t\t\t\tvar part_draw = document.getElementById("part_draw"+arr_ids[j]).innerHTML;\n\t\t\t\t\tvar code = document.getElementById("code"+arr_ids[j]).innerHTML;\n\t\t\t\t\tvar name = document.getElementById("name"+arr_ids[j]).innerHTML;\n\t\t\t\t\tvar mat_guage = document.getElementById("mat_guage"+arr_ids[j]).innerHTML;\n\t\t\t\t\tvar quantity = document.getElementById("quantity"+arr_ids[j]).innerHTML;\n\t\t\t\t\tvar pcs_weight = document.getElementById("pcs_weight"+arr_ids[j]).innerHTML;\n\t\t\t\t\tvar mat_uprice = document.getElementById("mat_uprice"+arr_ids[j]).innerHTML;\n\t\t\t\t\tvar mat_amount = document.getElementById("mat_amount"+arr_ids[j]).innerHTML;\n\t\t\t\t\tvar jgf_amount = document.getElementById("jgf_amount"+arr_ids[j]).innerHTML;\n\t\t   \t        if(quantity==\'\'){\n\t\t   \t        \tquantity = \'0\';\n\t\t   \t        }\n\t   \t        \tvar un_total = parseFloat(pcs_weight)*parseFloat(quantity);\n\t   \t        \tparent.$("#trparts").append(\'<tr id="\'+arr_ids[j]+\'">\'+\n\t\t\t\t\t\t\t\'<td class="center" style="width:36px;">\'\n\t\t\t\t\t\t\t+\'<label class="pos-rel"><input type="checkbox" name="ids" value="\'+arr_ids[j]+\'" class="ace" /><span class="lbl"></span></label></td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+pur_ordercode+\'">\'+pur_ordercode+\'</td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+pur_no+\'">\'+pur_no+\'</td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+job_code+\'">\'+job_code+\'</td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+mat_code+\'">\'+mat_code+\'</td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+mat_name+\'">\'+mat_name+\'</td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+part_code+\'">\'+part_code+\'</td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+part_name+\'">\'+part_name+\'</td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+part_draw+\'">\'+part_draw+\'</td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+code+\'">\'+code+\'</td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+name+\'">\'+name+\'</td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+mat_guage+\'">\'+mat_guage+\'</td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+quantity+\'"><input style="width:50px;" title="未交件数" id="un_qty\'+arr_ids[j]+\'" value="\'+quantity+\'" readonly="readonly"/></td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+un_total+\'"><input style="width:50px;" title="未交总数" id="un_totalqty\'+arr_ids[j]+\'" value="\'+un_total+\'" readonly="readonly"/></td>\'\n\t\t\t\t\t\t\t+\'<td class="th"><input style="width:50px;" title="入库件数" value="0" id="rk_qty\'+arr_ids[j]+\'" oninput="getrkqtyvalue(\'+arr_ids[j]+\',this)" maxlength="7"  onkeyup="keyupnum(this)"/></td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+pcs_weight+\'"><input style="width:50px;" title="换算比" id="MAT_PCS_WEIGHT\'+arr_ids[j]+\'" value="\'+pcs_weight+\'" oninput="getpcsvalue(\'+arr_ids[j]+\',this)" maxlength="7" onkeyup="keyup(this)" onkeyPress="keyPress(this)" onblur="blur(this)"/></td>\'\n\t\t\t\t\t\t\t+\'<td class="th"><input style="width:50px;" title="入库总数" value="0" id="rk_totalqty\'+arr_ids[j]+\'"  oninput="getrktotalvalue(\'+arr_ids[j]+\',this)"  maxlength="7" onkeyup="keyup(this)" onkeyPress="keyPress(this)" onblur="blur(this)"/></td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+mat_uprice+\'"><input style="width:50px;" title="材料单价" value="\'+mat_uprice+\'" oninput="getmatamtvalue(\'+arr_ids[j]+\',this)" id="mat_uprice\'+arr_ids[j]+\'" maxlength="7" onkeyup="keyup(this)" onkeyPress="keyPress(this)" onblur="blur(this)"/></td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+mat_amount+\'"><input style="width:50px;" title="材料费" value="\'+mat_amount+\'" id="mat_amount\'+arr_ids[j]+\'" readonly="readonly" maxlength="7" onkeyup="keyup(this)" onkeyPress="keyPress(this)" onblur="blur(this)"/></td>\'\n\t\t\t\t\t\t\t+\'<td class="th" title="\'+jgf_amount+\'"><input style="width:50px;" title="加工费" value="\'+jgf_amount+\'" oninput="getjgfamtvalue(\'+arr_ids[j]+\',this)" id="jgf_amount\'+arr_ids[j]+\'" maxlength="7" onkeyup="keyup(this)" onkeyPress="keyPress(this)" onblur="blur(this)"/></td>\'\n\t\t\t\t\t\t\t+\'<td class="th"><input style="width:50px;" title="入库单价" value="0" id="rk_price\'+arr_ids[j]+\'" readonly="readonly" maxlength="7" onkeyup="keyup(this)" onkeyPress="keyPress(this)" onblur="blur(this)"/></td>\'\n\t\t\t\t\t\t\t+\'<td class="th"><input style="width:50px;" title="入库金额" value="0" id="rk_amount\'+arr_ids[j]+\'" readonly="readonly" maxlength="7" onkeyup="keyup(this)" onkeyPress="keyPress(this)" onblur="blur(this)"/></td>\'\n\t\t\t\t\t\t\t+\'<td class="th"><input style="width:50px;" title="备注" id="note\'+arr_ids[j]+\'"/></td>\'\n\t\t\t\t\t\t\t+\'<td class="th"><input style="width:50px;" title="位置" id="position\'+arr_ids[j]+\'"/></td>\'\n\t\t\t\t\t\t\t+\'<td class="th"><select style="width:50px;height: 22px;" title="分条目" id="fentiaomu\'+arr_ids[j]+\'"><option value="0" selected>N</option><option value="1">Y</option></select></td>\'\n\t\t\t\t\t\t\t+\'</tr>\');\n\t\t\t\t}\n\t\t\t} \n        \tparent.$("#getprocesssize").text(arr_ids.length);\n        \tparent.layer.closeAll();\n\t\t}  \n//根据选中汇总值\nfunction inValue(){\n\t\t\tvar zfdstr = \'\';\n\t\t\tvar hxjestr = \'\';\n\t\t\tfor(var i=0;i < document.getElementsByName(\'ids\').length;i++){\n\t\t\t\t  if(document.getElementsByName(\'ids\')[i].checked){\n\t\t\t\t  \tif(zfdstr==\'\') zfdstr += document.getElementsByName(\'ids\')[i].value;\n\t\t\t\t  \telse zfdstr += \',\' + document.getElementsByName(\'ids\')[i].value;\n\t\t\t\t  }\n\t\t\t}\n\t\t\tif(zfdstr==\'\'){\n\t\t\t\t$("#zcheckbox").tips({\n\t\t\t\t\tside:2,\n\t\t            msg:\'点这里选择\',\n\t\t            bg:\'#AE81FF\',\n\t\t            time:1\n\t\t        });\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar sum=0;\n\t\t\tvar zfdarr = zfdstr.split(",");\n\t\t\tfor(var i=0;i<zfdarr.length;i++){\n\t\t\t\tif(zfdarr[i]==\'\'){\n\t\t\t\t\tbreak;\n\t\t\t\t}else{\n\t\t\t\t\tsum += parseFloat($("#shje_"+zfdarr[i]).val());\n\t\t\t\t\thxjestr +=$("#shje_"+zfdarr[i]).val()+";";\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar shje = \'${pd.shje_amt }\';\n\t\t\tif(parseFloat(sum)!=parseFloat(shje)){\n\t\t\t\t$("#getshjetotal").tips({\n\t\t\t\t\tside:2,\n\t\t            msg:\'收回总计与收回金额不匹配\',\n\t\t            bg:\'#AE81FF\',\n\t\t            time:1\n\t\t        });\n\t\t\t\t$("#getshjetotal").focus();\n\t\t\treturn false;\n\t\t\t}\n\t\t\t$("#getshjetotal").text(sum);\n\t\t\tparent.setYFDIOSValue(zfdstr,sum,hxjestr);\n\t\t\tparent.layer.closeAll();\n\t\t}\n\n\x3c!-- 下拉框 --\x3e\n<link rel="stylesheet" href="static/ace/css/chosen.css" />\n<script src="static/ace/js/bootbox.js"><\/script>\n<script src="static/ace/js/ace/ace.js"><\/script>\n<script src="static/ace/js/chosen.jquery.js"><\/script>\n<script type="text/javascript" src="static/js/jquery.tips.js"><\/script>\n\n//下拉框\n\t\t\tif(!ace.vars[\'touch\']) {\n\t\t\t\t$(\'.chosen-select\').chosen({allow_single_deselect:true}); \n\t\t\t\t$(window)\n\t\t\t\t.off(\'resize.chosen\')\n\t\t\t\t.on(\'resize.chosen\', function() {\n\t\t\t\t\t$(\'.chosen-select\').each(function() {\n\t\t\t\t\t\t var $this = $(this);\n\t\t\t\t\t\t $this.next().css({\'width\': $this.parent().width()});\n\t\t\t\t\t});\n\t\t\t\t}).trigger(\'resize.chosen\');\n\t\t\t\t$(document).on(\'settings.ace.chosen\', function(e, event_name, event_val) {\n\t\t\t\t\tif(event_name != \'sidebar_collapsed\') return;\n\t\t\t\t\t$(\'.chosen-select\').each(function() {\n\t\t\t\t\t\t var $this = $(this);\n\t\t\t\t\t\t $this.next().css({\'width\': $this.parent().width()});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t$(\'#chosen-multiple-style .btn\').on(\'click\', function(e){\n\t\t\t\t\tvar target = $(this).find(\'input[type=radio]\');\n\t\t\t\t\tvar which = parseInt(target.val());\n\t\t\t\t\tif(which == 2) $(\'#form-field-select-4\').addClass(\'tag-input-style\');\n\t\t\t\t\t else $(\'#form-field-select-4\').removeClass(\'tag-input-style\');\n\t\t\t\t});\n\t\t\t}\n\nbootbox.dialog({\n\t\t\t\t\t\t\tmessage: "<span class=\'bigger-110\'>您没有选择任何内容!</span>",\n\t\t\t\t\t\t\tbuttons: \t\t\t\n\t\t\t\t\t\t\t{ "button":{ "label":"确定", "className":"btn-sm btn-success"}}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t$("#zcheckbox").tips({\n\t\t\t\t\t\t\tside:1,\n\t\t\t\t            msg:\'点这里全选\',\n\t\t\t\t            bg:\'#AE81FF\',\n\t\t\t\t            time:1\n\t\t\t\t        });\n\n\n\n//自动检索  tobody id="trjobs"\n<input style="height: 20px;" type="text" name="" id="yunman" value="" maxlength="40" oninput="tableFilter()" title="产品查找">\n\t\t\t\t\t\t\t\nfunction tableFilter() {\n            var keyword = document.getElementById("yunman").value.toLowerCase().split(" ");\n            var table = document.getElementById("trjobs");\n            var ele;\n            for (var r = 0; r < table.rows.length; r++) {\n                ele = table.rows[r].innerHTML;\n                var displayStyle = \'none\';\n                for (var i = 0; i < keyword.length; i++) {\n                    if (keyword == "") { displayStyle = ""; break; }\n                    if (ele.toLowerCase().indexOf(keyword[i]) > 0) {\n                        displayStyle = \'\';\n                    } else {\n                        displayStyle = \'none\';\n                        break;\n                    }\n                }\n                table.rows[r].style.display = displayStyle;\n            }\n}\n\x3c!--提示框--\x3e\n<script type="text/javascript" src="static/js/jquery.tips.js"><\/script>\n\n$("#roleName").tips({\n\t\t    side:3,\n\t            msg:\'请输入\',\n\t            bg:\'#AE81FF\',\n\t            time:2\n\t        });\n\t\t$("#roleName").focus();\n\t\treturn false;\n\n\x3c!-- 日期框 --\x3e\n<link rel="stylesheet" href="static/ace/css/datepicker.css" />\n<script src="static/ace/js/date-time/bootstrap-datepicker.js"><\/script>\n\n<%\n\tString path = request.getContextPath();\n\tString basePath = request.getScheme() + "://"\n\t\t\t+ request.getServerName() + ":" + request.getServerPort()\n\t\t\t+ path + "/";\n%>\n<%=basePath%>\n\n//日期框\n$(\'.date-picker\').datepicker({\n\t\t\t\tautoclose: true,\n\t\t\t\ttodayHighlight: true,\n\t\t\t\tclearBtn: true\n});\n\n\n//js 日期格式化\nfunction formatDate(now) { \n\t\t     var year=now.getFullYear(); \n\t\t     var month=now.getMonth()+1;\n\t\t     var monthval=("0" + month).slice(-2);\n\t\t     var date=now.getDate(); \n\t\t     var dateval=("0" + date).slice(-2);\n\t\t     return year+"/"+monthval+"/"+dateval; \n} \n//格式化金额 数字，小数位，货币符号，千位符号，小数符号\nfunction formatMoney(number, places, symbol, thousand, decimal) {\n            number = number || 0;\n            places = !isNaN(places = Math.abs(places)) ? places : 2;\n            symbol = symbol !== undefined ? symbol : "$";\n            thousand = thousand || ",";\n            decimal = decimal || ".";\n            var negative = number < 0 ? "-" : "",\n                i = parseInt(number = Math.abs(+number || 0).toFixed(places), 10) + "",\n                j = (j = i.length) > 3 ? j % 3 : 0;\n            return symbol + negative + (j ? i.substr(0, j) + thousand : "") + i.substr(j).replace(/(\\d{3})(?=\\d)/g, "$1" + thousand) + (places ? decimal + Math.abs(number - i).toFixed(places).slice(2) : "");\n}\n\n\n//显示隐藏查询条件\nfunction dohiddensearch(){\n\t\t\tif(jQuery("#hiddentable").is(\':hidden\')){\n\t\t\t\t$("#hiddentable").show();\n\t\t\t}else{\n\t\t\t\t$("#hiddentable").hide();\n\t\t\t} \n}\n\t\t\n//导出excel\nfunction toExcel(){\nwindow.location.href=\'<%=basePath%>阿散发出/excel.do\';\n}\n<script type="text/javascript">\n\tvar zTree;\n\t$(document).ready(function(){\n\t\t\t\n\t\t\tvar setting = {\n\t\t\t    showLine: true,\n\t\t\t    checkable: true\n\t\t\t};\n\t\t\tvar zn = \'${zTreeNodes}\';\n\t\t\tvar zTreeNodes = eval(zn);\n\t\t\tzTree = $("#tree").zTree(setting, zTreeNodes);\n\t\t});\n\t\n\t\t//保存\n\t\t function save(){\n\t\t\tvar nodes = zTree.getCheckedNodes();\n\t\t\tvar tmpNode;\n\t\t\tvar ids = "";\n\t\t\tfor(var i=0; i<nodes.length; i++){\n\t\t\t\ttmpNode = nodes[i];\n\t\t\t\tif(i!=nodes.length-1){\n\t\t\t\t\tids += tmpNode.id+",";\n\t\t\t\t}else{\n\t\t\t\t\tids += tmpNode.id;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar msg = "${msg}";\n\t\t\tvar ROLE_ID = "${ROLE_ID}";\n\t\t\tvar url = "<%=basePath%>个撒地方/saveB4B萨芬utton.do";\n\t\t\tvar postData;\n\t\t\tpostData = {"ROLE_ID":ROLE_ID,"menuIds":ids,"msg":msg};\n\t\t\t$("#zhongxin").hide();\n\t\t\t$("#zhongxin2").show();\n\t\t\t$.post(url,postData,function(data){\n\t\t\t\ttop.Dialog.close();\n\t\t\t});\n\t\t }\n\n\t/**\n\t * 字符串转换为字符串数组\n\t * @param str 字符串\n\t * @param splitRegex 分隔符\n\t * @return\n\t */\n\tpublic static String[] str2StrArray(String str,String splitRegex){\n\t\tif(isEmpty(str)){\n\t\t\treturn null;\n\t\t}\n\t\treturn str.split(splitRegex);\n\t}\n\t\n\t/**\n\t * 用默认的分隔符(,)将字符串转换为字符串数组\n\t * @param str\t字符串\n\t * @return\n\t */\n\tpublic static String[] str2StrArray(String str){\n\t\treturn str2StrArray(str,",\\\\s*");\n\t}\n\n\t/**\n\t * 利用BigInteger对权限进行2的权的和计算\n\t * @param rights String型权限编码数组\n\t * @return 2的权的和\n\t */\n\tpublic static BigInteger sumRights(String[] rights){\n\t\tBigInteger num = new BigInteger("0");\n\t\tfor(int i=0; i<rights.length; i++){\n\t\t\tnum = num.setBit(Integer.parseInt(rights[i]));\n\t\t}\n\t\treturn num;\n\t}\n\t/**\n\t * 测试是否具有指定编码的权限\n\t * @param sum\n\t * @param targetRights\n\t * @return\n\t */\n\tpublic static boolean testRights(String sum,String targetRights){\n\t\tif(Tools.isEmpty(sum))\n\t\t\treturn false;\n\t\treturn testRights(new BigInteger(sum),targetRights);\n\t}\n\t/**\n\t * 测试是否具有指定编码的权限\n\t * @param sum\n\t * @param targetRights\n\t * @return\n\t */\n\tpublic static boolean testRights(BigInteger sum,String targetRights){\n\t\treturn testRights(sum,Integer.parseInt(targetRights));\n\t}\n\t/**\n\t * 测试是否具有指定编码的权限\n\t * @param sum\n\t * @param targetRights\n\t * @return\n\t */\n\tpublic static boolean testRights(BigInteger sum,int targetRights){\n\t\treturn sum.testBit(targetRights);\n\t}\n\t//json jackson-mapper-asl-1.9.13.jar\n\tpublic static Object returnObject(PageData pd, Map map){\n\t\tif(pd.containsKey("callback")){\n\t\t\tString callback = pd.get("callback").toString();\n\t\t\treturn new JSONPObject(callback, map);\n\t\t}else{\n\t\t\treturn map;\n\t\t}\n\t}\n$("#trparts").find("tr td").length//长度\n("000" + Math.floor(Math.random()*10000)).slice(-4);//不足四位补0\nvar value = $("#IO_USERID option:selected");\nvar title = value.attr("title");\n$("#worker_code").val(title);//获取select change事件的title\n\n\t\t\t//汇总数据删除\n\t\t\tvar arr_ids = str.split(",");\n\t\t\tparent.$("#trparts tr").remove();\n\t\t\tvar qtys = \'\';//数量\n\t\t\tvar mat_ids = \'\';//主键\n\t\t\tfor(var i=0;i<arr_ids.length;i++){\n\t\t\t\tqtys+=document.getElementById("qty"+arr_ids[i]).innerHTML+\';\';\n\t\t\t\tmat_ids+=document.getElementById("mat_id"+arr_ids[i]).innerHTML+\';\';\n\t\t\t}\n\t\t\tvar arr_qtys = qtys.split(";");\n\t\t\tvar arr_matids = mat_ids.split(";");\n\t\t\tfor(var i=0;i<arr_ids.length;i++){\n\t\t\t\tvar qty = document.getElementById("qty"+arr_ids[i]).innerHTML;\n\t\t\t\tvar mat_id = document.getElementById("mat_id"+arr_ids[i]).innerHTML;\n\t\t\t\tvar totoalqty=0;\n\t\t\t\tif(arr_ids.length<=1){\n\t\t\t\t\tparent.$("#trparts tr").remove();\n\t\t\t\t\tparent.$("#trparts").append(<td class="th" title="\'+qty+\'">\'+qty+\'</td>\t\n\t\t\t\t\t<td class="th" title="\'+qty+\'">\'+qty+\'</td>\n\t\t\t\t\t<td class="th" title="0">0</td>)\n\t\t\t\t}else{\n\t\t\t\t\tfor(var j=i+1;j<arr_ids.length;j++){\n\t\t\t\t\t\tif(mat_id==arr_matids[j]){\n\t\t\t\t\t\t\ttotoalqty += parseFloat(qty)+parseFloat(arr_qtys[j]);\n\t\t\t\t\t\t\tarr_ids.splice(j,1);\n\t\t\t\t\t\t\tparent.$("#trparts tr").remove();\n\t\t\t\t\t\t\tparent.$("#trparts").append(\n\t\t\t\t\t\t\t<td class="th" title="\'+totoalqty +\'">\'+totoalqty +\'</td>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<td class="th" title="\'+qty+\'">\'+qty+\'</td>\n\t\t\t\t\t\t\t<td class="th" title="\'+arr_qtys[j]+\'">\'+arr_qtys[j]+\'</td>)\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tparent.$("#trparts tr").remove();\n\t\t\t\t\t\t\tparent.$("#trparts").append(<td class="th" title="\'+qty+\'">\'+qty+\'</td>\t\n\t\t\t\t\t\t\t<td class="th" title="\'+qty+\'">\'+qty+\'</td>\n\t\t\t\t\t\t\t<td class="th" title="0">0</td>)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t//改变数据\n\t\t\tvar str = \'\';\n\t\t\tfor(var i=0;i < document.getElementsByName(\'iosids\').length;i++){\n\t\t\t\tstr += \',\' + document.getElementsByName(\'iosids\')[i].value;\n\t\t\t}\n\t\t\tvar notes = $("#note"+id).val();\n\t\t\tvar arr_ids = str.split(",");\n\t\t\tvar totoalqty=0;\n\t\t\tvar cktotoalqty=0;//总数\n\t\t\tfor(var i=0;i<arr_ids.length;i++){\n\t\t\t\tif(arr_ids[i]==""){\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tcktotoalqty+=parseFloat($("#ck_qty"+arr_ids[i]).val());\n\t\t\t\t\tvar notess = $("#note"+arr_ids[i]).val();\n\t\t\t\t\tif(notes==notess){\n\t\t\t\t\t\ttotoalqty+=parseFloat($("#ck_qty"+arr_ids[i]).val());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t$("#ck_sumqty").val(cktotoalqty);\n\t\t\t$("#trioss tr").remove();\n\t\t\tfor(var j=0;j<arr_ids.length;j++){\n\t\t\t\tif(arr_ids[i]==""){\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tvar notess = $("#note"+arr_ids[j]).val();\n\t\t\t\t\tvar shenggongdan = $("#shenggongdan"+arr_ids[j]).find("option:selected").val();\n\t\t\t\t\tif(notes==notess && shenggongdan==1){\n\t\t\t\t\t\t$("#lilunzhi2"+arr_ids[j]).val(totoalqty);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t//改变内容\n\t\t\tvar str = \'\';\n\t\t\tfor(var i=0;i < document.getElementsByName(\'iosids\').length;i++){\n\t\t\t\tstr += \',\' + document.getElementsByName(\'iosids\')[i].value;\n\t\t\t}\n\t\t\tvar arr_ids = str.split(",");\n\t\t\tvar notestr = \'\';//备注\n\t\t\tfor(var i=0;i<arr_ids.length;i++){\n\t\t\t\t$("#shenggongdan"+arr_ids[i]).val(\'1\');\n\t\t\t\tnotestr+=$("#note"+arr_ids[i]).val()+\',fh,\'; \n\t\t\t}\n\t\t\tvar arr_notestr = notestr.split(",fh,");\n\t\t\tfor(var i=0;i<arr_ids.length;i++){\n\t\t\t\tif(arr_ids[i]==""){\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tvar note = $("#note"+arr_ids[i]).val();\n\t\t\t\t\tvar liunzhi1 = (parseFloat($("#ck_qty"+arr_ids[i]).val())/parseFloat(mat_danhao))*parseFloat(ok_rate);\n\t\t\t\t\tvar totoalqty=0;\n\t\t\t\t\ttotoalqty=parseFloat(liunzhi1);\n\t\t\t\t\tif(arr_ids.length<=1){\n\t\t\t\t\t\t$("#shenggongdan"+arr_ids[i]).val(\'1\');\n\t\t\t\t\t}else{\n\t\t\t\t\t\tfor(var j=0;j<arr_ids.length;j++){\n\t\t\t\t\t\t\tif(arr_ids[i]==""){\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tif(i==j){\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tif($("#shenggongdan"+arr_ids[i]).find("option:selected").val()==0){\n\t\t\t\t\t\t\t\t\t\t$("#shenggongdan"+arr_ids[i]).val(\'0\');\n\t\t\t\t\t\t\t\t\t\t$("#lilunzhi1"+arr_ids[i]).val(liunzhi1);\n\t\t\t\t\t\t\t\t\t\t$("#lilunzhi2"+arr_ids[i]).val(liunzhi1);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tif(note==arr_notestr[j]){\n\t\t\t\t\t\t\t\t\t\t\tvar quantitys = $("#ck_qty"+arr_ids[j]).val();\n\t\t\t\t\t\t\t\t\t\t\tvar liunzhiss = (parseFloat(quantitys)/parseFloat(mat_danhao))*parseFloat(ok_rate);\n\t\t\t\t\t\t\t\t\t\t\ttotoalqty+=parseFloat(liunzhiss);\n\t\t\t\t\t\t\t\t\t\t\t$("#shenggongdan"+arr_ids[j]).val(\'0\');\n\t\t\t\t\t\t\t\t\t\t\t$("#lilunzhi2"+arr_ids[j]).val(liunzhi1);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(j==arr_ids.length-1){\n\t\t\t\t\t\t\t\t\t$("#shenggongdan"+arr_ids[i]).val(\'1\');\n\t\t\t\t\t\t\t\t\t$("#lilunzhi2"+arr_ids[i]).val(totoalqty);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t```')])])])])}),[],!1,null,null,null);n.default=r.exports}}]);