(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{668:function(e,t,n){"use strict";n.r(t);var i=n(6),r=Object(i.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}},[t("h2",{attrs:{id:"java-压缩"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#java-压缩"}},[this._v("#")]),this._v(" java 压缩")]),this._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('\npackage com.example.springbootdemo.utils;\n\nimport java.io.BufferedInputStream;\nimport java.io.BufferedOutputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.apache.commons.compress.archivers.zip.ZipArchiveEntry;\nimport org.apache.commons.compress.archivers.zip.ZipArchiveInputStream;\nimport org.apache.commons.compress.archivers.zip.ZipArchiveOutputStream;\nimport org.apache.commons.io.IOUtils;\n\npublic class ZipConpress {\n    static int bufferSize = 8192;//单位bytes\n\n    /**\n     * 用于单文件压缩\n     */\n    public static void doCompress(File srcFile, File destFile) throws IOException {\n        ZipArchiveOutputStream out = null;\n        InputStream is = null;\n        try {\n            is = new BufferedInputStream(new FileInputStream(srcFile), bufferSize);\n            out = new ZipArchiveOutputStream(new BufferedOutputStream(new FileOutputStream(destFile), bufferSize));\n            ZipArchiveEntry entry = new ZipArchiveEntry(srcFile.getName());\n            entry.setSize(srcFile.length());\n            out.putArchiveEntry(entry);\n            IOUtils.copy(is, out);\n            out.closeArchiveEntry();\n        } finally {\n            IOUtils.closeQuietly(is);\n            IOUtils.closeQuietly(out);\n        }\n    }\n\n    /**\n     * 用于多文件压缩\n     */\n    public static void doCompressFiles(List<File> srcFiles, File destFile) throws IOException {\n        ZipArchiveOutputStream out = null;\n        InputStream is = null;\n        try {\n            out = new ZipArchiveOutputStream(new BufferedOutputStream(new FileOutputStream(destFile), bufferSize));\n            for(File srcFile:srcFiles){\n                is = new BufferedInputStream(new FileInputStream(srcFile), bufferSize);\n                ZipArchiveEntry entry = new ZipArchiveEntry(srcFile.getName());\n                entry.setSize(srcFile.length());\n                out.putArchiveEntry(entry);\n                IOUtils.copy(is, out);\n            }\n            out.closeArchiveEntry();\n        } finally {\n            IOUtils.closeQuietly(is);\n            IOUtils.closeQuietly(out);\n        }\n    }\n\n    /**\n     * 解压\n     */\n    public static void doDecompress(File srcFile, File destDir) throws IOException {\n        ZipArchiveInputStream is = null;\n        try {\n            is = new ZipArchiveInputStream(new BufferedInputStream(new FileInputStream(srcFile), bufferSize));\n            ZipArchiveEntry entry = null;\n            while ((entry = is.getNextZipEntry()) != null) {\n                if (entry.isDirectory()) {\n                    File directory = new File(destDir, entry.getName());\n                    directory.mkdirs();\n                } else {\n                    OutputStream os = null;\n                    try {\n                        os = new BufferedOutputStream(\n                                new FileOutputStream(new File(destDir, entry.getName())), bufferSize);\n                        IOUtils.copy(is, os);\n                    } finally {\n                        IOUtils.closeQuietly(os);\n                    }\n                }\n            }\n        } finally {\n            IOUtils.closeQuietly(is);\n        }\n    }\n\n    /**\n     * 测试\n     * @param args\n     */\n    public static void main(String[] args) {\n        try {\n            ZipConpress.doCompress(new File("E:\\\\第一个.txt"),new File("E:\\\\第一个.zip"));\n            List<File> files=new ArrayList<File>();\n            files.add(new File("E:\\\\第一个.txt"));\n            files.add(new File("E:\\\\第二个.txt"));\n            ZipConpress.doCompressFiles(files,new File("E:\\\\abc-test.zip"));\n            File doDecompressDir = new File("E:\\\\测试上传\\\\abc-test1723");\n            if (!doDecompressDir.exists()) {\n                doDecompressDir.mkdirs();\n            }\n            ZipConpress.doDecompress(new File("E:\\\\第一个.zip"), doDecompressDir\n            );\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n\n\n\n')])])])])}),[],!1,null,null,null);t.default=r.exports}}]);