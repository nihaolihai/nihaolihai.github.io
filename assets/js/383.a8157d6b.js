(window.webpackJsonp=window.webpackJsonp||[]).push([[383],{872:function(e,n,r){"use strict";r.r(n);var s=r(6),a=Object(s.a)({},(function(){var e=this.$createElement,n=this._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}},[n("h2",{attrs:{id:"使用zuul聚合多个微服务的swagger文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用zuul聚合多个微服务的swagger文档"}},[this._v("#")]),this._v(" 使用Zuul聚合多个微服务的Swagger文档")]),this._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[this._v('在 Zuul 中进行聚合操作的原因是不想每次都去访问独立服务的文档，通过网关统一整合这些服务的文档方便使用。\n\n在网关中加入 Swagger 的 Maven 依赖，代码如下所示。\n<dependency>\n    <groupId>io.springfox</groupId>\n    <artifactId>springfox-swagger-ui</artifactId>\n    <version>2.9.2</version>\n</dependency>\n<dependency>\n    <groupId>io.springfox</groupId>\n    <artifactId>springfox-swagger2</artifactId>\n    <version>2.9.2</version>\n</dependency>\n\n自定义配置进行整合，笔者采用了一种比较简单的方式，不是手动的去配置要整合的服务信息，而是直接去读取 Eureka 中的服务信息，只要是 Eureka 中的服务就都能整合进来，代码如下所示。\n纯文本复制\n@EnableSwagger2\n@Component\n@Primary\npublic class DocumentationConfig implements SwaggerResourcesProvider {\n    @Autowired\n    private DiscoveryClient discoveryClient;\n    @Value("${spring.application.name}")\n    private String applicationName;\n    @Override\n    public List<SwaggerResource> get() {\n        List<SwaggerResource> resources = new ArrayList<>();\n        // 排除自身, 将其他的服务添加进去\n        discoveryClient.getServices().stream().filter(s -> !s.equals(applicationName)).forEach(name -> {\n            resources.add(swaggerResource(name, "/" + name + "/v2/api-docs", "2.0"));\n        });\n        return resources;\n    }\n    private SwaggerResource swaggerResource(String name, String location, String version) {\n        SwaggerResource swaggerResource = new SwaggerResource();\n        swaggerResource.setName(name);\n        swaggerResource.setLocation(location);\n        swaggerResource.setSwaggerVersion(version);\n        return swaggerResource;\n    }\n}\n\n')])])])])}),[],!1,null,null,null);n.default=a.exports}}]);